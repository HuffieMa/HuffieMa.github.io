<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HALFA博客</title>
  
  
  <link href="https://www.mahaofei.com/atom.xml" rel="self"/>
  
  <link href="https://www.mahaofei.com/"/>
  <updated>2022-04-24T01:47:13.000Z</updated>
  <id>https://www.mahaofei.com/</id>
  
  <author>
    <name>Huffie</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>数据处理Numpy的基本使用方法</title>
    <link href="https://www.mahaofei.com/post/55ccd68.html"/>
    <id>https://www.mahaofei.com/post/55ccd68.html</id>
    <published>2022-04-24T01:47:13.000Z</published>
    <updated>2022-04-24T01:47:13.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Numpy的安装</strong></p><p>建议使用Anaconda管理这些包，Anaconda的具体教程参考上一篇笔记【Anaconda的基本使用与在Pycharm中调用】</p><p>安装好Anaconda后可以在Anaconda Prompt使用<code>activate 环境名</code>进入自己创建的环境。</p><p>使用下面指令安装Numpy和Pandas</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda install numpy</span><br><span class="line">conda install pandas</span><br></pre></td></tr></table></figure><p><strong>导入numpy</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><h1>1. 数组创建</h1><h2 id="（1）从已有数据创建数组">（1）从已有数据创建数组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">numpy.array(<span class="built_in">object</span>, dtype = <span class="literal">None</span>, copy = <span class="literal">True</span>, order = <span class="literal">None</span>, subok = <span class="literal">False</span>, ndmin = <span class="number">0</span>)</span><br><span class="line"><span class="comment"># object  数组或嵌套的数列</span></span><br><span class="line"><span class="comment"># dtype   数组元素的数据类型，可选</span></span><br><span class="line"><span class="comment"># copy    对象是否需要复制，可选</span></span><br><span class="line"><span class="comment"># order   创建数组的样式，C为行方向，F为列方向，A为任意方向（默认）</span></span><br><span class="line"><span class="comment"># subok   默认返回一个与基类类型一致的数组</span></span><br><span class="line"><span class="comment"># ndmin   指定生成数组的最小维度</span></span><br></pre></td></tr></table></figure><blockquote><p>例如：<br>a = np.array([[1, 2], [3, 4]])<br>print (a)<br>[ [1  2]<br>[3  4] ]</p><p>a = np.array([1, 2, 3, 4, 5], ndmin = 2)<br>print (a)<br>[ [1 2 3 4 5] ]</p></blockquote><h2 id="（2）从数值范围创建数组">（2）从数值范围创建数组</h2><p>numpy.arange：使用 arange 函数创建数值范围并返回 ndarray 对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.arange(start, stop, step, dtype)</span><br></pre></td></tr></table></figure><p>numpy.linspace 函数用于创建一个一维数组，数组是一个等差数列构成的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.linspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="literal">True</span>, retstep=<span class="literal">False</span>, dtype=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># num       要生成的等步长的样本数量，默认为50</span></span><br><span class="line"><span class="comment"># endpoint  该值为True时，数列中包含stop值，反之不包含，默认是True。</span></span><br><span class="line"><span class="comment"># retstep   如果为True时，生成的数组中会显示间距，反之不显示，默认是False</span></span><br></pre></td></tr></table></figure><p>numpy.logspace 函数用于创建一个于等比数列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.logspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="literal">True</span>, base=<span class="number">10.0</span>, dtype=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># base  对数 log 的底数</span></span><br></pre></td></tr></table></figure><h2 id="（3）创建全0数组">（3）创建全0数组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.zeros(shape, dtype = <span class="built_in">float</span>, order = <span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="（4）创建全1数组">（4）创建全1数组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ones(shape, dtype = <span class="literal">None</span>, order = <span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="（5）创建指定形状、指定数据类型、但未初始化的数组">（5）创建指定形状、指定数据类型、但未初始化的数组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.empty(shape, dtype = <span class="built_in">float</span>, order = <span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure><h1>2. 数组的基本属性</h1><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">ndarray.ndim</td><td style="text-align:left">秩，即轴的数量或维度的数量</td></tr><tr><td style="text-align:left">ndarray.shape</td><td style="text-align:left">数组的维度，对于矩阵，n 行 m 列</td></tr><tr><td style="text-align:left">ndarray.reshape</td><td style="text-align:left">调整数组的大小</td></tr><tr><td style="text-align:left">ndarray.size</td><td style="text-align:left">数组元素的总个数，相当于 .shape 中 n·m 的值</td></tr><tr><td style="text-align:left">ndarray.dtype</td><td style="text-align:left">ndarray 对象的元素类型</td></tr><tr><td style="text-align:left">ndarray.itemsize</td><td style="text-align:left">ndarray 对象中每个元素的大小，以字节为单位</td></tr><tr><td style="text-align:left">ndarray.flags</td><td style="text-align:left">ndarray 对象的内存信息</td></tr><tr><td style="text-align:left">ndarray.real</td><td style="text-align:left">ndarray元素的实部</td></tr><tr><td style="text-align:left">ndarray.imag</td><td style="text-align:left">ndarray 元素的虚部</td></tr><tr><td style="text-align:left">ndarray.data</td><td style="text-align:left">包含实际数组元素的缓冲区，由于一般通过数组的索引获取元素，所以通常不需要使用这个属性。</td></tr></tbody></table><blockquote><p>例如：<br>a = np.array([[1,2,3],[4,5,6]])   # (2, 3)</p><p>a = np.array([[1,2,3],[4,5,6]])<br>b = a.reshape(3,2)<br>print (b)<br>[[1, 2]<br>[3, 4]<br>[5, 6]]</p></blockquote><h1>3. 数组的切片与索引</h1><h2 id="（1）slice函数切片">（1）slice函数切片</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">slice</span>(start, stop[, step])</span><br><span class="line"><span class="comment"># start  起始位置</span></span><br><span class="line"><span class="comment"># stop   结束位置</span></span><br><span class="line"><span class="comment"># step   间距</span></span><br></pre></td></tr></table></figure><h2 id="（2）冒号-分割切片-start-stop-step">（2）冒号<code>:</code>分割切片[start:stop:step]</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(10) # [0 1 2 3 4 5 6 7 8 9]</span><br><span class="line">b = a[2:7:2]</span><br><span class="line">b = a[5]</span><br><span class="line">b = a[2:]</span><br></pre></td></tr></table></figure><blockquote><p>冒号 : 的解释：如果只放置一个参数，如 <strong>[2]</strong>，将返回与该索引相对应的单个元素。如果为 <strong>[2:]</strong>，表示从该索引开始以后的所有项都将被提取。如果使用了两个参数，如 <strong>[2:7]</strong>，那么则提取两个索引(不包括停止索引)之间的项。</p></blockquote><h2 id="（3）split方法">（3）split方法</h2><p>numpy.split 函数沿特定的轴将数组分割为子数组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.split(ary, indices_or_sections, axis)</span><br><span class="line"><span class="comment"># ary：被分割的数组</span></span><br><span class="line"><span class="comment"># indices_or_sections：如果是一个整数，就用该数平均切分，如果是一个数组，为沿轴切分的位置（左开右闭）</span></span><br><span class="line"><span class="comment"># axis：设置沿着哪个方向进行切分，默认为 0，横向切分，即水平方向。为 1 时，纵向切分，即竖直方向</span></span><br></pre></td></tr></table></figure><h1>4. 数组基本操作</h1><h2 id="（1）数组展开">（1）数组展开</h2><p>numpy.ndarray.flatten 返回一份数组拷贝，对拷贝所做的修改不会影响原始数组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">a.flatten()             <span class="comment"># [0 1 2 3 4 5 6 7]</span></span><br><span class="line">a.flatten(order = <span class="string">&#x27;F&#x27;</span>)  <span class="comment"># [0 4 1 5 2 6 3 7]</span></span><br><span class="line"><span class="comment"># order：&#x27;C&#x27;按行，&#x27;F&#x27;按列，&#x27;A&#x27;原顺序，&#x27;K&#x27;元素在内存中的出现顺序</span></span><br></pre></td></tr></table></figure><p>numpy.ravel() 展平的数组元素，顺序通常是&quot;C风格&quot;，返回的是数组视图（view，有点类似 C/C++引用reference的意味），修改会影响原始数组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">a.ravel()              <span class="comment"># [0 1 2 3 4 5 6 7]</span></span><br><span class="line">a.ravel(order = <span class="string">&#x27;F&#x27;</span>)  <span class="comment"># [0 4 1 5 2 6 3 7]</span></span><br></pre></td></tr></table></figure><h2 id="（2）数组转置">（2）数组转置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.transpose(arr, axes)</span><br><span class="line"><span class="comment"># arr ：要操作的数组</span></span><br><span class="line"><span class="comment"># axes：整数列表，对应维度，通常所有维度都会对换</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">numpy.T</span><br><span class="line"><span class="comment"># 数组全部转置</span></span><br></pre></td></tr></table></figure><blockquote><p>例如：<br>a = np.arange(12).reshape(3,4)<br>print (np.transpose(a))<br>print (a.T)</p></blockquote><h2 id="（3）数组轴的移动与交换">（3）数组轴的移动与交换</h2><p>numpy.rollaxis 函数移动特定的轴到一个特定位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.rollaxis(arr, axis, start)</span><br><span class="line"><span class="comment"># arr   ：数组</span></span><br><span class="line"><span class="comment"># axis  ：要移动的轴，其它轴的相对位置不会改变</span></span><br><span class="line"><span class="comment"># start ：默认为零，表示完整的滚动。会滚动到特定位置</span></span><br></pre></td></tr></table></figure><p>numpy.swapaxes 函数用于交换数组的两个轴</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.swapaxes(arr, axis1, axis2)</span><br><span class="line"><span class="comment"># arr   ：数组</span></span><br><span class="line"><span class="comment"># axis1 ：对应第一个轴的整数</span></span><br><span class="line"><span class="comment"># axis2 ：对应第二个轴的整数</span></span><br></pre></td></tr></table></figure><h2 id="（4）连接数组">（4）连接数组</h2><p><strong>数组连接</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.concatenate((a1, a2, ...), axis)</span><br><span class="line"><span class="comment"># a1, a2, ... ：相同类型的数组</span></span><br><span class="line"><span class="comment"># axis：沿着它连接数组的轴，默认为 0</span></span><br></pre></td></tr></table></figure><blockquote><p>例如：<br>a = np.array([[1,2],[3,4]])<br>b = np.array([[5,6],[7,8]])<br>print (np.concatenate((a,b)))<br>[[1 2]<br>[3 4]<br>[5 6]<br>[7 8]]<br>print (np.concatenate((a,b),axis = 1))<br>[[1 2 5 6]<br>[3 4 7 8]]</p></blockquote><p><strong>数组堆叠</strong></p><p>numpy.stack 函数用于沿新轴连接数组序列</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.stack(arrays, axis)</span><br><span class="line"><span class="comment"># arrays : 相同形状的数组序列</span></span><br><span class="line"><span class="comment"># axis   : 返回数组中的轴，输入数组沿着它来堆叠</span></span><br></pre></td></tr></table></figure><blockquote><p>例如：<br>a = np.array([[1,2],[3,4]])<br>b = np.array([[5,6],[7,8]])<br>print (np.stack((a,b),0))<br>[[[1 2]<br>[3 4]]<br>[[5 6]<br>[7 8]]]<br>print (np.stack((a,b),1))<br>[[[1 2]<br>[5 6]]<br>[[3 4]<br>[7 8]]]</p></blockquote><p>具体的数组堆叠方式，参考此文章：<a href="https://blog.csdn.net/weixin_44330492/article/details/100126774">【Python中numpy.stack()函数最形象易懂的理解】</a></p><h2 id="（5）数组形状改变">（5）数组形状改变</h2><p><strong>numpy.resize</strong></p><p>numpy.resize 函数返回指定大小的新数组。如果新数组大小大于原始大小，则包含原始数组中的元素的副本。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.resize(arr, shape)</span><br><span class="line"><span class="comment"># arr   : 要修改大小的数组</span></span><br><span class="line"><span class="comment"># shape : 返回数组的新形状</span></span><br></pre></td></tr></table></figure><h2 id="（6）数组元素的操作">（6）数组元素的操作</h2><p><strong>numpy.append</strong></p><p>numpy.append 函数在数组的末尾添加值。 追加操作会分配整个数组，并把原来的数组复制到新数组中。 此外，输入数组的维度必须匹配否则将生成ValueError。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.append(arr, values, axis=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># arr   ：输入数组</span></span><br><span class="line"><span class="comment"># values：要向arr添加的值，需要和arr形状相同（除了要添加的轴）</span></span><br><span class="line"><span class="comment"># axis  ：默认为 None。当axis无定义时，是横向加成，返回总是为一维数组！当axis有定义的时候，分别为0和1的时候。当axis有定义的时候，分别为0和1的时候（列数要相同）。当axis为1时，数组是加在右边（行数要相同）。</span></span><br></pre></td></tr></table></figure><p><strong>numpy.insert</strong></p><p>numpy.insert 函数在给定索引之前，沿给定轴在输入数组中插入值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.insert(arr, obj, values, axis)</span><br><span class="line"><span class="comment"># arr   ：输入数组</span></span><br><span class="line"><span class="comment"># obj   ：在其之前插入值的索引</span></span><br><span class="line"><span class="comment"># values：要插入的值</span></span><br><span class="line"><span class="comment"># axis  ：沿着它插入的轴，如果未提供，则输入数组会被展开</span></span><br></pre></td></tr></table></figure><p><strong>numpy.delete</strong></p><p>numpy.delete 函数返回从输入数组中删除指定子数组的新数组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numpy.delete(arr, obj, axis)</span><br><span class="line"><span class="comment"># arr ：输入数组</span></span><br><span class="line"><span class="comment"># obj ：可以被切片，整数或者整数数组，表明要从输入数组删除的子数组</span></span><br><span class="line"><span class="comment"># axis：沿着它删除给定子数组的轴，如果未提供，则输入数组会被展开</span></span><br></pre></td></tr></table></figure><p><strong>numpy.unique</strong></p><p>numpy.unique 函数用于去除数组中的重复元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">numpy.unique(arr, return_index, return_inverse, return_counts)</span><br><span class="line"><span class="comment"># arr：输入数组，如果不是一维数组则会展开</span></span><br><span class="line"><span class="comment"># return_index：如果为true，返回新列表元素在旧列表中的位置（下标），并以列表形式储</span></span><br><span class="line"><span class="comment"># return_inverse：如果为true，返回旧列表元素在新列表中的位置（下标），并以列表形式储</span></span><br><span class="line"><span class="comment"># return_counts：如果为true，返回去重数组中的元素在原数组中的出现次数</span></span><br></pre></td></tr></table></figure><h2 id="（7）数组排序">（7）数组排序</h2><table><thead><tr><th style="text-align:left">种类</th><th style="text-align:left">速度</th><th style="text-align:left">最坏情况</th><th style="text-align:left">工作空间</th><th style="text-align:left">稳定性</th></tr></thead><tbody><tr><td style="text-align:left"><code>'quicksort'</code>（快速排序）</td><td style="text-align:left">1</td><td style="text-align:left"><code>O(n^2)</code></td><td style="text-align:left">0</td><td style="text-align:left">否</td></tr><tr><td style="text-align:left"><code>'mergesort'</code>（归并排序）</td><td style="text-align:left">2</td><td style="text-align:left"><code>O(n*log(n))</code></td><td style="text-align:left">~n/2</td><td style="text-align:left">是</td></tr><tr><td style="text-align:left"><code>'heapsort'</code>（堆排序）</td><td style="text-align:left">3</td><td style="text-align:left"><code>O(n*log(n))</code></td><td style="text-align:left">0</td><td style="text-align:left">否</td></tr></tbody></table><p><strong>numpy.sort()</strong></p><p>numpy.sort() 函数返回输入数组的排序副本。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">numpy.sort(a, axis, kind, order)</span><br><span class="line"><span class="comment"># a: 要排序的数组</span></span><br><span class="line"><span class="comment"># axis: 沿着它排序数组的轴，如果没有数组会被展开，沿着最后的轴排序， axis=0 按列排序，axis=1 按行排序</span></span><br><span class="line"><span class="comment"># kind: 默认为&#x27;quicksort&#x27;（快速排序）</span></span><br><span class="line"><span class="comment"># order: 如果数组包含字段，则是要排序的字段</span></span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">3</span>,<span class="number">7</span>],[<span class="number">9</span>,<span class="number">1</span>]])</span><br><span class="line"><span class="built_in">print</span> (np.sort(a))  <span class="comment"># [[3 7],[1 9]]</span></span><br><span class="line"><span class="built_in">print</span> (np.sort(a, axis = <span class="number">0</span>))  <span class="comment"># [[3 1],[9 7]]</span></span><br></pre></td></tr></table></figure><p><strong>numpy.argsort()</strong></p><p>numpy.argsort() 函数返回的是数组值从小到大的索引值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.argsort([<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>])  <span class="comment"># [1 2 0]</span></span><br></pre></td></tr></table></figure><h1>5. Broadcast广播规则</h1><p>广播(Broadcast)是 numpy 对不同形状(shape)的数组进行数值计算的方式， 对数组的算术运算通常在相应的元素上进行。</p><p><strong>具体广播规则如下：</strong></p><ul><li>让所有输入数组都向其中形状最长的数组看齐，形状中不足的部分都通过在前面加 1 补齐。</li><li>输出数组的形状是输入数组形状的各个维度上的最大值。</li><li>如果输入数组的某个维度和输出数组的对应维度的长度相同或者其长度为 1 时，这个数组能够用来计算，否则出错。</li><li>当输入数组的某个维度的长度为 1 时，沿着此维度运算时都用此维度上的第一组值。</li></ul><p><strong>举例</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[ <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">           [<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>],</span><br><span class="line">           [<span class="number">20</span>,<span class="number">20</span>,<span class="number">20</span>],</span><br><span class="line">           [<span class="number">30</span>,<span class="number">30</span>,<span class="number">30</span>]])</span><br><span class="line">b = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(a + b)</span><br></pre></td></tr></table></figure><p><img src="https://www.runoob.com/wp-content/uploads/2018/10/image0020619.gif" alt=""></p><h1>6. 数组基本运算</h1><h2 id="（1）算数函数">（1）算数函数</h2><p><strong>加减乘除</strong></p><p>NumPy 算术函数包含简单的加减乘除: <strong>add()</strong>，<strong>subtract()</strong>，<strong>multiply()</strong> 和 <strong>divide()</strong>。数组必须具有相同的形状或符合数组广播规则。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">9</span>, dtype = np.float_).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">b = np.array([<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>])</span><br><span class="line"><span class="built_in">print</span> (np.add(a,b))</span><br><span class="line"><span class="built_in">print</span> (np.subtract(a,b))</span><br><span class="line"><span class="built_in">print</span> (np.multiply(a,b))</span><br><span class="line"><span class="built_in">print</span> (np.divide(a,b))</span><br></pre></td></tr></table></figure><p><strong>倒数</strong></p><p>numpy.reciprocal() 函数返回参数逐元素的倒数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">0.25</span>, <span class="number">1.33</span>, <span class="number">1</span>, <span class="number">100</span>])</span><br><span class="line"><span class="built_in">print</span> (np.reciprocal(a))</span><br></pre></td></tr></table></figure><p><strong>指数</strong></p><p>numpy.power() 函数将第一个输入数组中的元素作为底数，计算它与第二个输入数组中相应元素的幂。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">10</span>,<span class="number">100</span>,<span class="number">1000</span>])</span><br><span class="line">b = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span> (np.power(a,b))</span><br></pre></td></tr></table></figure><p><strong>模与余数</strong></p><p>numpy.mod() 计算输入数组中相应元素的相除后的余数。 函数 numpy.remainder() 也产生相同的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>])</span><br><span class="line">b = np.array([<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>])</span><br><span class="line"><span class="built_in">print</span> (np.mod(a,b))</span><br><span class="line"><span class="built_in">print</span> (np.remainder(a,b))</span><br></pre></td></tr></table></figure><h2 id="（2）统计函数">（2）统计函数</h2><p><strong>最大值与最小值</strong></p><p>numpy.amin() 用于计算数组中的元素沿指定轴的最小值。<br>numpy.amax() 用于计算数组中的元素沿指定轴的最大值。<br>numpy.argmax() 和 numpy.argmin()函数分别沿给定轴返回最大和最小元素的索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">3</span>,<span class="number">7</span>,<span class="number">5</span>],[<span class="number">8</span>,<span class="number">4</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>]])</span><br><span class="line"><span class="built_in">print</span> (np.amin(a,<span class="number">1</span>))    <span class="comment"># [3 3 2]</span></span><br><span class="line"><span class="built_in">print</span> (np.amin(a,<span class="number">0</span>))    <span class="comment"># [2 4 3]</span></span><br><span class="line"><span class="built_in">print</span> (np.amax(a))      <span class="comment"># 9</span></span><br><span class="line"><span class="built_in">print</span> (np.amax(a, axis = <span class="number">0</span>))   <span class="comment"># [8 7 9]</span></span><br><span class="line"><span class="built_in">print</span> (np.argmax(a))    <span class="comment"># 8</span></span><br><span class="line"><span class="built_in">print</span> (np.argmax(a, axis = <span class="number">0</span>)) <span class="comment"># [1 0 2]</span></span><br><span class="line"><span class="built_in">print</span> (np.argmin(a))    <span class="comment"># 6</span></span><br><span class="line"><span class="built_in">print</span> (np.argmin(a, axis = <span class="number">1</span>)) <span class="comment"># [0 2 0]</span></span><br></pre></td></tr></table></figure><p><strong>最值差（最大值-最小值）</strong></p><p>numpy.ptp()函数计算数组中元素最大值与最小值的差（最大值 - 最小值）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">3</span>,<span class="number">7</span>,<span class="number">5</span>],[<span class="number">8</span>,<span class="number">4</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>]])</span><br><span class="line"><span class="built_in">print</span> (np.ptp(a))    <span class="comment"># 7</span></span><br><span class="line"><span class="built_in">print</span> (np.ptp(a, axis = <span class="number">1</span>))    <span class="comment"># [4 5 7]</span></span><br><span class="line"><span class="built_in">print</span> (np.ptp(a, axis = <span class="number">0</span>))    <span class="comment"># [6 3 6]</span></span><br></pre></td></tr></table></figure><p><strong>算数平均值</strong></p><p>numpy.mean() 函数返回数组中元素的算术平均值。 如果提供了轴，则沿其计算。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="built_in">print</span> (np.mean(a))    <span class="comment"># 3.6666666666666665</span></span><br><span class="line"><span class="built_in">print</span> (np.mean(a, axis = <span class="number">0</span>))  <span class="comment"># [2.66666667 3.66666667 4.66666667]</span></span><br><span class="line"><span class="built_in">print</span> (np.mean(a, axis = <span class="number">1</span>))  <span class="comment"># [2. 4. 5.]</span></span><br></pre></td></tr></table></figure><p><strong>加权平均值</strong></p><p>numpy.average() 函数根据在另一个数组中给出的各自的权重计算数组中元素的加权平均值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span> (np.average(a))  <span class="comment"># 2.5</span></span><br><span class="line">wts = np.array([<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span> (np.average(a,weights = wts))  <span class="comment"># 2.0</span></span><br></pre></td></tr></table></figure><p><strong>中位数</strong></p><p>numpy.median() 函数用于计算数组 a 中元素的中位数（中值）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">30</span>,<span class="number">65</span>,<span class="number">70</span>],[<span class="number">80</span>,<span class="number">95</span>,<span class="number">10</span>],[<span class="number">50</span>,<span class="number">90</span>,<span class="number">60</span>]])</span><br><span class="line"><span class="built_in">print</span> (np.median(a))  <span class="comment"># 65.0</span></span><br><span class="line"><span class="built_in">print</span> (np.median(a, axis = <span class="number">0</span>))  <span class="comment"># [50. 90. 60.]</span></span><br><span class="line"><span class="built_in">print</span> (np.median(a, axis = <span class="number">1</span>))  <span class="comment"># [65. 80. 60.]</span></span><br></pre></td></tr></table></figure><p><strong>方差</strong></p><p>统计中的方差（样本方差）是每个样本值与全体样本值的平均数之差的平方值的平均数，即 mean((x - x.mean())** 2)。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.var([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])  <span class="comment"># 1.25</span></span><br></pre></td></tr></table></figure><p><strong>标准差</strong></p><p>标准差是一组数据平均值分散程度的一种度量，是方差的算术平方根。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.std([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])  <span class="comment"># 1.1180339887498949</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">关于使用Numpy进行一些数组操作的函数方法记录与部分例程，包括数组的创建、切片索引、数组的基本操作（转置、连接、排序、展开等），以及数组运算的一些基本函数的使用方法。</summary>
    
    
    
    <category term="程序设计" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Python/"/>
    
    
    <category term="笔记" scheme="https://www.mahaofei.com/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Anaconda的基本使用与在Pycharm中调用</title>
    <link href="https://www.mahaofei.com/post/8543c9d.html"/>
    <id>https://www.mahaofei.com/post/8543c9d.html</id>
    <published>2022-04-22T09:00:27.000Z</published>
    <updated>2022-04-22T09:00:27.000Z</updated>
    
    <content type="html"><![CDATA[<h1>关于Anaconda</h1><p>环境 = “好比一栋楼，在楼里面分配一间屋给各种‘包’放，每间房里面的‘包’互不影响”</p><p>激活环境 = “告诉电脑，我现在要用这个屋子里面的‘包’来做东西了所以要进这间屋子”</p><p>移除环境 = “现在这个屋子里面我原来要用的东西现在不需要了把它赶出去节省电脑空间”</p><p>Conda创建环境相当于创建一个虚拟的空间将这些包都装在这个位置，我不需要了可以直接打包放入垃圾箱，同时也可以针对不同程序的运行环境选择不同的conda虚拟环境进行运行。</p><p>例如：</p><p>我的某个程序需要使用python3.8以及一堆其他的包，另一个程序需要python2.7加其它的一些包，这就需要我为这两个程序分别创建虚拟环境。</p><p>这样就可以在一台电脑上实现<strong>多个版本的python程序编写</strong>，同时想<strong>打包程序为exe</strong>的时候，也不会打包进其它没用到的包。</p><h1>Anaconda的安装</h1><p>Anaconda官网链接：<a href="https://www.anaconda.com/">https://www.anaconda.com/</a></p><p>各个系统版本的Anaconda安装程序都可以直接下载安装即可。</p><h1>Anaconda的使用</h1><h2 id="配置Anaconda源">配置Anaconda源</h2><p>通常anaconda的默认源在境外，下载速度会非常慢甚至导致网络错误下载包失败，打开<code>Anaconda Prompt</code>使用以下方法将清华镜像添加到<code>Anaconda</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ </span><br><span class="line">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure><p>使用如下命令查看当前channel</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda info</span><br></pre></td></tr></table></figure><h2 id="Anaconda-Prompt">Anaconda Prompt</h2><p><strong>conda版本</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda --version</span><br></pre></td></tr></table></figure><p><strong>列出所有虚拟环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br><span class="line">conda info --envs</span><br></pre></td></tr></table></figure><p><strong>创建虚拟环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n 环境名</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">conda create --name python39 python=3.9</span></span><br></pre></td></tr></table></figure><p><strong>删除已有的环境及其安装包</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name 环境名 --all</span><br></pre></td></tr></table></figure><p><strong>克隆环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create --name 新环境名 --clone 原环境名</span><br></pre></td></tr></table></figure><p><strong>激活某个环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">activate 环境名</span><br></pre></td></tr></table></figure><p><strong>退出当前环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure><p><strong>查看环境中现有的包</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list</span><br></pre></td></tr></table></figure><p><strong>用conda或者pip安装包到当前环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install 包名称</span><br></pre></td></tr></table></figure><p><strong>包更新</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda update numpy</span><br></pre></td></tr></table></figure><h2 id="Anaconda-Navigtor">Anaconda Navigtor</h2><p>用于管理工具包和环境的图形用户界面，后续涉及的众多管理命令也可以在 Navigator 中手工实现。</p><h1>Pycharm中使用</h1><p><strong>1. 新建工程后，选择使用现有的解释器</strong></p><p><img src="https://img.mahaofei.com/img/20220422191328.png" alt=""></p><p><strong>2. 选择自己新建的虚拟环境</strong></p><p><img src="https://img.mahaofei.com/img/20220422191623.png" alt=""></p>]]></content>
    
    
    <summary type="html">我想要在电脑上安装许多不同版本的python，或者想要让python环境中只存在用到的包方便对程序打包发布，这些情况都需要我们创建python虚拟环境，Anaconda就是一个这样管理python环境的工具。</summary>
    
    
    
    <category term="程序设计" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Python/"/>
    
    
    <category term="笔记" scheme="https://www.mahaofei.com/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>毕业设计论文写作格式规范</title>
    <link href="https://www.mahaofei.com/post/16785ea7.html"/>
    <id>https://www.mahaofei.com/post/16785ea7.html</id>
    <published>2022-04-20T07:13:46.000Z</published>
    <updated>2022-04-20T07:13:46.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://pan.baidu.com/s/1n-1xqn3rarwiLiwlTYCNLA?pwd=p5tg">河北工业大学毕业设计中期报告模板.docx</a></p></blockquote><h1>重要要求</h1><p><strong>文档内所有文字（标题、正文、图、表、参考文献等）都应该使用模板规定的样式</strong></p><h1>标题</h1><ol><li><p>每个一级标题（一、二、三……）前应空一行。</p></li><li><p>一级、二级、三级标题不应该作为某页的最后一行（即所谓孤行控制）</p></li><li><p>页面最后由于插图导致的空白行最多允许1~2行的宽度。</p></li><li><p>正文多级标题格式顺序</p></li></ol><blockquote><p><strong>（1）这个可以加粗</strong><br>1）再下级的都与正文同格式<br>a.</p></blockquote><h1>图、表</h1><h2 id="图片插图">图片插图</h2><ol><li><p>表格和插图不能直接出现在正文段落的首行，必须先有文字说明。</p></li><li><p>图题、表头的编制要简洁明了，具有自明性，不能太笼统：图的序号编制只允许到二级，例如图1.1，图1.2，图4.5这样的二级图号，禁止出现图2.1.1这样的三级图号。</p></li><li><p>图片与图题、表头与表格，必须保证在同一页上。</p></li><li><p>图片尺寸尽量调小，能表达清楚图片内容即可。</p></li><li><p>图片中的上下空白尽可能小，通过裁剪剪去图片中的上下空白部分。</p></li><li><p>图中所标注文字大小，要比正文字号小1号。</p></li><li><p>流程图、框图等尽量使用Visio绘制，Visio打开状态下，可直接将visio文件插入word中。</p></li><li><p>图片标注格式</p></li></ol><p><img src="https://img.mahaofei.com/img/20220412112135.png" alt=""></p><p align="center" >图1.1 Web of Science网站图标（图题在下）<p align="center" >Fig.1.1 Web of Science favicon</p>## 表格<ol><li><p>表格一律采用三线表：表的序号编制只允许到二级，例如表1.1，表1.2，表4.5这样的二级图号，禁止出现表2.1.1这样的三级表号</p></li><li><p>表格标注格式</p></li></ol><p align="center" >表1.1 表格的标题（表头在上）<p align="center" >Table.1.1 Title of the table</p><p><img src="https://img.mahaofei.com/img/20220412112135.png" alt=""></p><h1>公式编辑</h1><ol><li>公式使用word中的公式插件（alt =），符号使用斜体、单位使用正体</li></ol><h1>参考文献</h1><p>[1]     袁庆龙, 候文义. Ni-P合金镀层组织形貌及显微硬度研究[J]. 太原理工大学学报, 2001, (1): 51-53.（期刊类）</p><p>[2]     金显贺, 王昌长, 王忠东, 等. 一种用于在线检测局部放电的数字滤波技术[J]. 清华大学学报（自然科学版）, 1993, 33(4): 62–67.</p><p>[3]     Khorasani K. Adaptive control of flexible joint robot[J]. IEEE Trans on Robotics and Automation, 1992, 8(2): 250-267.</p><p>[4]     刘国钧, 陈绍业, 王凤翥. 图书馆目录[M]. 北京: 高等教育出版社, 1957.（专著-参考书）</p><p>[5]     辛希孟. 信息技术与信息服务国际研讨会论文集: A集[C]. 北京: 中国社会科学出版社, 1994.（专著-会议论文集）</p><p>[6]     张筑生. 微分半动力系统的不变集[D]. 北京: 北京大学数学系数学研究所, 1983. （专著-博硕士论文）</p><p>[7]     冯西桥. 核反应堆压力管道与压力容器的LBB分析[R]. 北京: 清华大学核能技术设计研究院, 1997. （报告）</p><p>[8]     GB/T 16159-1996, 汉语拼音正词法基本规则[S]. （标准类）</p><p>[9]     姜锡洲. 一种温热外敷药制备方案[P]. 中国: 881056073,1989-07-26. （专利）</p><p>[10]  王明亮. 关于中国学术期刊标准化数据库系统工程的进展[EB/OL]. http: <a href="//www.cajcd.edu.cn/pub/wml.txt/980810%E2%80%932.html">//www.cajcd.edu.cn/pub/wml.txt/980810–2.html</a>, 1998-08-16/1998-10-04.  （电子文献）</p><p>[11]  Aytekin Çaʇlar, Rezaeitabar Yousef, Dogru Sedat, et al. Railway fastener inspection by real-time machine vision[J]. IEEE Transactions on Systems Man and Cybernetics: Systems, 2015, 45(7): 1101-1107.</p><p>[12]  Stivanello Maurício Edgar, Marcellino Kleber Juan. A Machine Vision System for Online Metal Can-End Rivet Inspection[J]. Journal of Physics: Conference Series, 2019, 1335(1)</p><p>[13]  Zhang Hui, Li Xuanlun, Zhong Hang, et al. Automated machine vision system for liquid particle inspection of pharmaceutical injection[J]. IEEE Transactions on Instrumentation and Measurement, 2018, 67(6): 1278-1297.</p><h1>附录：各样式信息</h1><table><thead><tr><th>样式</th><th>中文字体</th><th>英文字体</th><th>字号</th><th>格式</th><th>行距</th><th>段距</th><th>缩进</th><th>换行与分页</th><th>示例</th></tr></thead><tbody><tr><td>报告标题</td><td>黑体</td><td>Times New Roman</td><td>丝毫</td><td>居中加粗</td><td>1.5倍行距</td><td>段前段后12磅</td><td>无</td><td>孤行控制</td><td>HalfA博客毕业设计论文写作规范</td></tr><tr><td>一级标题</td><td>黑体</td><td>Times New Roman</td><td>小四</td><td></td><td>1.5倍行距</td><td>段前段后6磅</td><td>无</td><td>孤行控制</td><td>一、标题</td></tr><tr><td>二级标题</td><td>黑体</td><td>Times New Roman</td><td>五号</td><td>无</td><td>1.5倍行距</td><td>段前段后3磅</td><td>无</td><td>孤行控制</td><td>1.1 标题</td></tr><tr><td>三级标题</td><td>黑体</td><td>Times New Roman</td><td>五号</td><td>无</td><td>1.5倍行距</td><td>段前段后3磅</td><td>无</td><td>孤行控制</td><td>1.1.1 标题</td></tr><tr><td>正文</td><td>宋体</td><td>Times New Roman</td><td>五号</td><td>无</td><td>1.5倍行距</td><td>无</td><td>首行缩进2字符</td><td>无</td><td>正文</td></tr><tr><td>图题</td><td>宋体</td><td>Times New Roman</td><td>小五</td><td>居中</td><td>1.5倍行距</td><td>无</td><td>无</td><td>无</td><td>图1.1 图题 Fig.1.1 Figure title</td></tr><tr><td>表头</td><td>宋体</td><td>Times New Roman</td><td>小五</td><td>居中</td><td>1.5倍行距</td><td>无</td><td>无</td><td>无</td><td>表1.1 表头 Table.1.1 Table title</td></tr><tr><td>表格标题</td><td>宋体</td><td>Times New Roman</td><td>小五</td><td>居中加粗</td><td>1.25倍行距</td><td>无</td><td>无</td><td>无</td><td>标题</td></tr><tr><td>表格内容</td><td>宋体</td><td>Times New Roman</td><td>小五</td><td>居中</td><td>1.5倍行距</td><td>无</td><td>无</td><td>无</td><td>表格内容</td></tr><tr><td>参考标题</td><td>黑体</td><td>Times New Roman</td><td>五号</td><td>居中</td><td>1.5倍行距</td><td>段前段后0.5行</td><td>无</td><td>无</td><td>参考文献</td></tr><tr><td>参考文献</td><td>宋体</td><td>Times New Roman</td><td>小五</td><td>无</td><td>1.5倍行距</td><td>无</td><td>悬挂缩进2字符、首行缩进-2字符</td><td>无</td><td>[1] 马浩飞. 毕业设计论文写作规范[J]. HalfA博客. 2022.</td></tr></tbody></table><p><img src="https://img.mahaofei.com/img/20220420165644.png" alt=""></p>]]></content>
    
    
    <summary type="html">博主在写毕业设计过程中遇到过的格式问题汇总，仅供参考。</summary>
    
    
    
    <category term="随笔" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="经验" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/%E7%BB%8F%E9%AA%8C/"/>
    
    
  </entry>
  
  <entry>
    <title>Solidworks装配体常见问题汇总（随时更新）</title>
    <link href="https://www.mahaofei.com/post/bc899151.html"/>
    <id>https://www.mahaofei.com/post/bc899151.html</id>
    <published>2022-04-15T12:23:20.000Z</published>
    <updated>2022-04-16T01:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-修改的标准件在装配体保存后又会还原">1. 修改的标准件在装配体保存后又会还原</h2><p><strong>问题描述：</strong></p><p>修改标准件后插入装配体中，可是当我们保存退出装配体后，再打开时发现修改好的标准件自动被替换成原来的那个标准件。</p><p><strong>解决方法：</strong></p><p>打开【<strong>工具-选项</strong>】，找到【<strong>异性孔向导/Toolbox</strong>】，<strong>取消</strong>勾选【<strong>将此文件夹设为Toolbox零部件的默认搜索位置</strong>】，重新打开装配体，可以看到修改后的零件被正确的装配好了</p><p><img src="https://img.mahaofei.com/img/20220415203208.png" alt=""></p><h2 id="2-调出标准件后如何再对其尺寸修改">2. 调出标准件后如何再对其尺寸修改</h2><p><strong>问题描述：</strong></p><p>在Solidworks画装配体中，经常会调用标准件，但有的时候装配时会发现标准件尺寸不合适需要修改，不想重新生成零件再重新配合，想要直接修改现有零件。</p><p><strong>解决方法：</strong></p><p>在装配体中，【<strong>右键</strong>】需要修改的标准件，选择【<strong>编辑Toolbox零部件</strong>】即可修改其参数。（需要提前加载Toolbox插件）</p><p><img src="https://img.mahaofei.com/img/20220415203738.png" alt=""></p><h2 id="3-Solidworks如何计算质量">3. Solidworks如何计算质量</h2><p>在模型树中对各个零件设置材质，然后点击质量属性即可。</p>]]></content>
    
    
    <summary type="html">在使用Solidworks的过程中遇到很多奇怪的错误比如修改的标准件装配好后重新打开装配体会还原默认形状等，在这里记录遇到的各种问题以及对应的解决方法，供各位参考。</summary>
    
    
    
    <category term="机械" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E6%A2%B0/"/>
    
    <category term="Solidworks" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E6%A2%B0/Solidworks/"/>
    
    
    <category term="bugs" scheme="https://www.mahaofei.com/tags/bugs/"/>
    
    <category term="Solirworks" scheme="https://www.mahaofei.com/tags/Solirworks/"/>
    
  </entry>
  
  <entry>
    <title>各大视频音频网站资源下载</title>
    <link href="https://www.mahaofei.com/post/2c340937.html"/>
    <id>https://www.mahaofei.com/post/2c340937.html</id>
    <published>2022-04-08T11:34:53.000Z</published>
    <updated>2022-04-08T11:34:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1>介绍</h1><p>使用<a href="https://github.com/soimort/you-get">You-get工具</a>，这是Github上的一个项目，可以下载大多数主流网站的视频，图片、音频。</p><p>支持的网站包括YouTube、Twitter、Facebook、bilibili、AcFun、niconico、网易云音乐、酷狗音乐、qq音乐、爱奇艺、腾讯视频、抖音、快手、知乎等等。</p><blockquote><p>详细文档参见：<a href="https://github.com/soimort/you-get">https://github.com/soimort/you-get</a></p></blockquote><h1>工具准备</h1><h2 id="1-下载安装python3">1. 下载安装python3</h2><p>网上有很多教程，按照教程安装最新版的python即可。</p><h2 id="2-安装you-get">2. 安装you-get</h2><p>按下<code>win+R</code>输入<code>cmd</code>，打开命令行窗口，使用如下指令安装you-get工具</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install you-get</span><br></pre></td></tr></table></figure><p>然后输入下方代码，升级you-get工具</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br><span class="line">pip3 install --upgrade you-get</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220407190404.png" alt=""></p><h1>使用方法</h1><h2 id="1-查看可以下载的质量和格式">1. 查看可以下载的质量和格式</h2><p>复制想要下载的视频或音频的网页链接。</p><p>使用<code>--info</code>/<code>-i</code>指令即可查看所有可以下载的文件质量和格式</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get -i https://www.bilibili.com/video/BV1Ni4y1k7rv</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220407191446.png" alt=""></p><h2 id="2-下载视频-音频-图片">2. 下载视频/音频/图片</h2><p>直接使用<code>you-get</code>指令会下载defalut下面的第一种格式，并下载到命令行当前所在目录。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get -i https://www.bilibili.com/video/BV1Ni4y1k7rv</span><br></pre></td></tr></table></figure><p>如果想要下载特定的格式，找到对应格式下面提示的下载指令，使用下载指令下载就行，例如我要下载此视频的mp4版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get --format=dash-flv https://www.bilibili.com/video/BV1Ni4y1k7rv</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220407193145.png" alt=""></p><p>可以看到速度还是蛮快的。</p><h2 id="3-设置输出文件夹与文件名">3. 设置输出文件夹与文件名</h2><p>使用<code>--output-dir</code>/<code>-o</code>选项设置路径，使用<code>--output-filename</code>/<code>-O</code>设置下载文件的名称：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you-get --format=dash-flv -o E:/Windows/VIDEOS -O 夏天 https://www.bilibili.com/video/BV1Ni4y1k7rv</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220407193428.png" alt=""></p>]]></content>
    
    
    <summary type="html">使用You-get工具，Github上的一个项目，可以下载大多数主流网站的视频，图片、音频。支持的网站包括YouTube、Twitter、Facebook、bilibili、AcFun、niconico、网易云音乐、酷狗音乐、qq音乐、爱奇艺、腾讯视频、抖音、快手、知乎等等。</summary>
    
    
    
    <category term="技巧" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="破解方法" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95/"/>
    
    
    <category term="破解" scheme="https://www.mahaofei.com/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>华为手机安装谷歌服务</title>
    <link href="https://www.mahaofei.com/post/367f6bb8.html"/>
    <id>https://www.mahaofei.com/post/367f6bb8.html</id>
    <published>2022-03-28T13:06:36.000Z</published>
    <updated>2022-03-28T13:06:36.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>链接: <a href="https://pan.baidu.com/s/1_PPC3xveD2xPwsg6JGgZmQ?pwd=wcrp">https://pan.baidu.com/s/1_PPC3xveD2xPwsg6JGgZmQ?pwd=wcrp</a><br>提取码: wcrp</p></blockquote><p>1、荣耀60或60pro教程【本人实测教程】，把这里的文件复制到手机</p><p>2、清除所有之前安装过的谷歌相关软件和系统进程。没装过的跳过这一步</p><p>3、打开 文件管理APP 将下载文件中的【Backup】 文件夹，复制到U盘根目录</p><p>4、很关键的一步，打开系统和更新，设置时间，将时间设置到2020年的任何一天</p><p>5、打开设置–系统和更新–备份和恢复-内部存储恢复-选择20191207的选项进行恢复。恢复完成后桌面会有一个谷歌服务助手，点开点激活，之后不用管它。回到设置–将时间设置为自动设置，恢复到2021年。</p><p>6、打开梯子。</p><p>7、安装0文件(microG)，装完之后打开，点账户account，点sign in，没有反应，就再点account，点sign in，登录谷歌账号（有几个登几个，后边不能再加）。</p><p>8、安装1，3，4，apk文件，然后卸载掉第7步安装的0文件(microG)</p><p>9、回到文件管理，安装2文件Google play服务.apk，拉下通知栏，等待弹出谷歌认证，之后点击验证（等10秒-50秒就会自动弹出来了）。</p><p>10、回到手机桌面，打开Google play商店，Google play商店可以正常打开，将Google play商店从后台关掉</p><p>11、打开手机设置-应用和服务-应用管理-点右上角，显示系统程序，搜索【Google】，</p><p>点开Google play商店，强行停止，后退，</p><p>点开-Google账号管理程序，存储，删除数据，后退，再后退</p><p>点开Google服务框架，存储，删除数据，后退</p><p>然后重启手机。</p><p>12、设置-里面有Google服务</p>]]></content>
    
    
    <summary type="html">以荣耀60或60pro为例【本人实测教程】</summary>
    
    
    
    <category term="技巧" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="破解方法" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95/"/>
    
    
    <category term="破解" scheme="https://www.mahaofei.com/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>❤最全ButterFly主题配置教程 与 Hexo博客备份方法</title>
    <link href="https://www.mahaofei.com/post/8ee3ad86.html"/>
    <id>https://www.mahaofei.com/post/8ee3ad86.html</id>
    <published>2022-03-26T13:14:56.000Z</published>
    <updated>2022-03-26T13:14:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1>ButterFly主题配置</h1><h2 id="一、主页设置">一、主页设置</h2><h3 id="1-1-导航菜单">1.1 导航菜单</h3><p><strong>导航菜单</strong></p><p>设置如下<code>_config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">时光轴:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="comment"># List||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   Music: /music/ || fas fa-music</span></span><br><span class="line">  <span class="comment">#   Movie: /movies/ || fas fa-video</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p>必须是<code>/xxx/</code>，后面<code>||</code>分开，然后写图标名。</p><p>默认子目录是展开的，如果你想要隐藏，在子目录里添加hide</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">List||fas</span>  <span class="string">fa-list||hide:</span> <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="attr">fas fa-music Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br></pre></td></tr></table></figure><p><strong>标签页</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span>/tags/index.md</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--- </span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018-01-05 00:00:00</span> </span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;tags&quot;</span> </span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>分类页</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span>/categories/index.md</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--- </span></span><br><span class="line"><span class="attr">title:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018-01-05 00:00:00</span> </span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;categories&quot;</span> </span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>友情链接</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page link</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span>/link/index.md</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--- </span></span><br><span class="line"><span class="attr">title:</span> <span class="string">友情链接</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018-06-07 22:17:49</span> </span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;link&quot;</span> </span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>在Hexo博客目录中的<code>source/_data</code>（如果没有_data 文件夹，请自行创建），创建一个文件<code>link.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span>  <span class="attr">class_name:</span> <span class="string">网站class_desc:值得推荐的网站link_list:</span> <span class="bullet">-</span> <span class="attr">name: Youtube link: https://www.youtube.com/ avatar:</span> <span class="string">https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span> <span class="string">descr:视频网站-</span> <span class="attr">name: Weibo link: https://www.weibo.com/ avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span> <span class="string">descr:中国最大社交分享平台-</span> <span class="attr">name: Twitter link: https://twitter.com/ avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span> <span class="string">descr:社交分享平台</span></span><br></pre></td></tr></table></figure><p>class_name和 class_desc 支持html 格式书写，如不需要，也可以留空。</p><p>友情链接界面可以由用户自己自定义，只需要在友情链接的md档设置就行，以普通的Markdown格式书写。</p><p><strong>搜索系统</strong></p><p>记得运行hexo clean</p><p><a href="https://github.com/PaicHyperionDev/hexo-generator-search">hexo-generator-search</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="1-2-社交图标">1.2 社交图标</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># social settings (社交圖標設置)</span></span><br><span class="line"><span class="comment"># formal:</span></span><br><span class="line"><span class="comment">#   icon: link || the description</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">CSDN:</span> <span class="string">https://blog.csdn.net/weixin_44543463</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-cuttlefish</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/HuffieMa</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:haofei_ma@163.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="string">知乎:</span> <span class="string">https://www.zhihu.com/people/ma-hao-fei-2</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-zhihu</span></span><br></pre></td></tr></table></figure><h3 id="1-3-网站图像">1.3 网站图像</h3><p><strong>网站图标与头像</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Favicon（網站圖標）</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Avatar (頭像)</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.jpg</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><strong>顶部图</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">disable_top_img:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><strong>设置顶部图</strong></p><table><thead><tr><th>配置</th><th>解释</th></tr></thead><tbody><tr><td>index_img</td><td>主页的top_img</td></tr><tr><td>default_top_img</td><td>默认的top_img，当页面的top_img 没有配置时，会显示default_top_img</td></tr><tr><td>archive_img</td><td>归档页面的top_img</td></tr><tr><td>tag_imgtag</td><td>子页面的默认top_img</td></tr><tr><td>tag_per_img</td><td>tag 子页面的top_img，可配置每个tag 的top_img</td></tr><tr><td>category_img</td><td>category 子页面的默认top_img</td></tr><tr><td>category_per_img</td><td>category 子页面的top_img，可配置每个category 的top_img</td></tr></tbody></table><p>并不推荐为每个tag 和每个category 都配置不同的顶部图，因为配置太多会拖慢生成速度</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">tag_per_img</span></span><br><span class="line">  <span class="attr">aplayer:</span> <span class="string">https://xxxxxx.png</span></span><br><span class="line">  <span class="attr">android:</span> <span class="string">ddddddd.png</span></span><br><span class="line"><span class="string">category_per_img</span></span><br><span class="line"><span class="string">随想:</span> <span class="string">hdhdh.png</span></span><br><span class="line"><span class="string">推荐:</span> <span class="string">ddjdjdjd.png</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主页设置</span></span><br><span class="line"><span class="comment"># 默认top_img全屏，site_info在中间</span></span><br><span class="line"><span class="comment"># 使用默认, 都无需填写（建议默认）</span></span><br><span class="line"><span class="attr">index_site_info_top:</span>  <span class="comment"># 主页标题距离顶部距离例如300px/300em/300rem/10% </span></span><br><span class="line"><span class="attr">index_top_img_height:</span>   <span class="comment">#主页top_img高度例如300px/300em/300rem 不能使用百分比</span></span><br></pre></td></tr></table></figure><h3 id="1-4-主页文章设置">1.4 主页文章设置</h3><p><strong>文章信息</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># Home Page</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-page-meta.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-info.png" alt=""></p><p><strong>文章简介</strong></p><p>在butterfly里，有四种可供选择</p><ul><li>description：只显示description</li><li><strong>both</strong>：优先选择description，如果没有配置description，则显示自动节选的内容</li><li>auto_excerpt：只显示自动节选</li><li>false：不显示文章内容</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Display the article introduction on homepage</span></span><br><span class="line"><span class="comment"># 1: description</span></span><br><span class="line"><span class="comment"># 2: both (if the description exists, it will show description, or show the auto_excerpt)</span></span><br><span class="line"><span class="comment"># 3: auto_excerpt (default)</span></span><br><span class="line"><span class="comment"># false: do not show the article introduction</span></span><br><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>文章封面</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># display the cover or not (是否顯示文章封面)</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># the position of cover in home page (封面顯示的位置)</span></span><br><span class="line">  <span class="comment"># left/right/both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># When cover is not set, the default cover is displayed (當沒有設置cover時，默認的封面顯示)</span></span><br><span class="line">  <span class="attr">default_cover:</span> <span class="string">https://img.mahaofei.com/img/linux_debian.jpg</span></span><br></pre></td></tr></table></figure><h3 id="1-5-字数统计">1.5 字数统计</h3><p><code>npm install hexo-wordcount --save</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-wordcount-totalcount.png" alt=""></p><h3 id="1-6-页脚设置">1.6 页脚设置</h3><p><strong>博客年份</strong></p><p>展示你站点起始时间的选项。它位于页面的最底部。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2021</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">&lt;a</span>  <span class="string">href=&quot;https://beian.miit.gov.cn&quot;&gt;&lt;img</span>  <span class="string">class=&quot;icp-icon&quot;</span>  <span class="string">src=&quot;/img/icp.png&quot;&gt;&lt;span&gt;津ICP备2021000769号-2&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">true</span> <span class="comment"># Copyright of theme and framework</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>百度统计</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Baidu Analytics</span></span><br><span class="line"><span class="comment"># https://tongji.baidu.com/web/welcome/login</span></span><br><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">439a0d0abeb31dd8f338efd8266c999b</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-footer-text.png" alt=""></p><p><strong>页脚背景</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer是否显示图片背景(与top_img一致) </span></span><br><span class="line"><span class="attr">footer_bg:</span>  <span class="literal">true</span></span><br><span class="line"><span class="comment"># 留空/false显示默认的颜色</span></span><br><span class="line"><span class="comment"># img链接图片的链接，显示所配置的图片</span></span><br><span class="line"><span class="comment"># 颜色(HEX值- #0000FF; RGB值- rgb(0,0,255);颜色单词- orange;渐变色- linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)） 对应的颜色</span></span><br><span class="line"><span class="comment"># true显示跟top_img 一样</span></span><br></pre></td></tr></table></figure><h3 id="1-7-侧边栏设置">1.7 侧边栏设置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># aside (側邊欄)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-cuttlefish</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">CSDN欢迎关注</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://blog.csdn.net/weixin_44543463</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">毕设ing！！</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure><h2 id="二、文章设置">二、文章设置</h2><h3 id="2-1-代码设置">2.1 代码设置</h3><p><strong>代码高亮</strong></p><p>Butterfly支持6种代码高亮样式：</p><ul><li>darker</li><li>pale night</li><li><strong>light</strong></li><li>ocean</li><li>mac</li><li><strong>mac light</strong></li></ul><p>具体样式参考<a href="https://butterfly.js.org/posts/4aa8abbe/#%E4%BB%A3%E7%A2%BC%E9%AB%98%E4%BA%AE%E4%B8%BB%E9%A1%8C">官方文档</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span>  <span class="string">light</span></span><br></pre></td></tr></table></figure><p><strong>代码复制</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span>  <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>代码展开关闭</strong></p><p>在默认情况下，代码框自动展开，可设置是否所有代码框都关闭状态，点击&gt;可展开代码</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span>  <span class="literal">true</span>  </span><br><span class="line"><span class="comment"># true 代码框不展开，需点击&gt;打开; </span></span><br><span class="line"><span class="comment"># false 代码框展开，有&gt;点击按钮</span></span><br><span class="line"><span class="comment"># none 不显示&gt;按钮</span></span><br></pre></td></tr></table></figure><p><strong>代码高度限制</strong></p><p>可配置代码高度限制，超出的部分会隐藏，并显示展开按钮。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span>  <span class="literal">false</span>  <span class="comment"># unit: px 直接添加数字，如200</span></span><br></pre></td></tr></table></figure><h3 id="2-2-文章复制设置">2.2 文章复制设置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># copy settings </span></span><br><span class="line"><span class="comment"># copyright: Add the copyright information after copied content (复制的内容后面加上版权信息)</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>配置</th><th>解释</th></tr></thead><tbody><tr><td>enable</td><td>是否开启网站复制权限</td></tr><tr><td>copyright</td><td>复制的内容后面加上版权信息</td></tr><tr><td>enable</td><td>是否开启复制版权信息添加</td></tr><tr><td>limit_count</td><td>字数限制，当复制文字大于这个字数限制时，将在复制的内容后面加上版权信息</td></tr></tbody></table><h3 id="2-3-文章目录">2.3 文章目录</h3><p>在文章页，会有一个目录，用于显示TOC。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span> <span class="comment"># 文章页是否显示TOC</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span> <span class="comment"># 普通页面是否显示TOC</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span> <span class="comment"># 是否显示章节数</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span> <span class="comment"># 是否展开TOC</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># 简洁模式（侧边栏只显示TOC, 只对文章页有效）</span></span><br></pre></td></tr></table></figure><p>主题会优先判断文章Markdown的Front-matter是否有配置，如有，则以Front-matter的配置为准。否则，以主题配置文件中的配置为准</p><h3 id="2-4-文章打赏">2.4 文章打赏</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sponsor/reward</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechatpay.png</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信支付</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><h3 id="2-5-下一篇文章">2.5 下一篇文章</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="2-6-文章分享">2.6 文章分享</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Share.js</span></span><br><span class="line"><span class="comment"># https://github.com/overtrue/share.js</span></span><br><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">qq,wechat,weibo,facebook,twitter</span></span><br></pre></td></tr></table></figure><p>在 head 里添加一些meta资料，例如缩略图、标题、时间等。当分享网页到一些平台时，平台会读取 Open Graph 的内容，展示缩略图，标题信息等等</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open graph meta tags</span></span><br><span class="line"><span class="comment"># https://developers.facebook.com/docs/sharing/webmasters/</span></span><br><span class="line"><span class="attr">Open_Graph_meta:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="2-7-数学公式KaTex">2.7 数学公式KaTex</h3><p>首先禁用MathJax（如果你配置过MathJax 的话），然后修改你的主題配置文件以便加载katex.min.css:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Math (數學)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># About the per_page</span></span><br><span class="line"><span class="comment"># if you set it to true, it will load mathjax/katex script in each page (true 表示每一頁都加載js)</span></span><br><span class="line"><span class="comment"># if you set it to false, it will load mathjax/katex script according to your setting (add the &#x27;mathjax: true&#x27; in page&#x27;s front-matter)</span></span><br><span class="line"><span class="comment"># (false 需要時加載，須在使用的 Markdown Front-matter 加上 mathjax: true)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MathJax</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># KaTeX</span></span><br><span class="line"><span class="attr">katex:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide_scrollbar:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>卸载之前 hexo 的 markdown 渲染器以及 hexo-math，然后安装新的 <code>hexo-renderer-markdown-it-plus</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">替换 `hexo-renderer-kramed` 或者 `hexo-renderer-marked` 等hexo的markdown渲染器</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以在你的package.json里找到hexo的markdwon渲染器，并将其卸载</span>  </span><br><span class="line">npm un hexo-renderer-marked --save  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span>  </span><br><span class="line">npm un hexo-renderer-kramed --save  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载 `hexo-math`</span>  </span><br><span class="line">npm un hexo-math --save  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">然后安装 `hexo-renderer-markdown-it-plus`</span>  </span><br><span class="line">npm i @upupming/hexo-renderer-markdown-it-plus --save。</span><br><span class="line"></span><br><span class="line">npm install @neilsustc/markdown-it-katex --save</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在站点配置文件中配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>在博客模板文件添加</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">katex: false</span><br></pre></td></tr></table></figure><h2 id="三、博客美化">三、博客美化</h2><h3 id="3-1-背景canvas-nest">3.1 背景canvas_nest</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).( <span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines,default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手机端不显示true 手机端显示</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-canvas_nest.gif" alt=""></p><h3 id="3-2-打字烟花特效">3.2 打字烟花特效</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果) </span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode </span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment"># open shake (抖动特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-type-animation.gif" alt=""></p><h3 id="3-3-页面美化">3.3 页面美化</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 美化页面显示</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-网站副标题打字效果">3.4 网站副标题打字效果</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source 調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle 只會顯示 sub 的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br></pre></td></tr></table></figure><h3 id="3-5-访问人数busuanzi">3.5 访问人数busuanzi</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-busuanzi-site-pv.png" alt=""></p><h3 id="3-6-运行时间">3.6 运行时间</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Time difference between publish date and now (網頁運行時間)</span></span><br><span class="line"><span class="comment"># Formal: Month/Day/Year Time or Year/Month/Day Time</span></span><br><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">2021</span><span class="string">/01/16</span> <span class="number">23</span><span class="string">:30:32</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-7-夜间模式">3.7 夜间模式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dark mode </span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># dark mode和light mode切换按钮</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>配置项</th><th>说明</th></tr></thead><tbody><tr><td>autoChangeMode: 1</td><td>跟随系统而变化，不支持的浏览器/系统将按照时间晚上6点到早上6点之间切换为dark mode</td></tr><tr><td>autoChangeMode: 2</td><td>只按照时间晚上6点到早上6点之间切换为dark mode,其余时间为light mode</td></tr><tr><td>autoChangeMode: false</td><td>取消自动切换</td></tr></tbody></table><h3 id="3-8-阅读模式">3.8 阅读模式</h3><p>阅读模式下会去掉除文章外的内容，避免干扰阅读。</p><p>只会出现在文章页面，右下角会有阅读模式按钮。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span>  <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="3-9-页脚添加Github-badge标签">3.9 页脚添加Github-badge标签</h3><p><img src="https://img.mahaofei.com/img/20220411223909.png" alt=""></p><ol><li>首先到<a href="https://shields.io/">https://shields.io/</a>这个徽标生成网站生成Github-badge徽标。</li></ol><p><img src="https://img.mahaofei.com/img/20220411120309.png" alt=""></p><p>具体方法见网页，标签中用到的图标可以从<a href="https://simpleicons.org/">simpleicons</a>查询。</p><p>生成的链接都是这样的 → <a href="https://img.shields.io/badge/Hosted-Github-brightgreen?style=flat&amp;logo=GitHub">https://img.shields.io/badge/Hosted-Github-brightgreen?style=flat&amp;logo=GitHub</a><br>然后简单写一下html代码，为每个标签添加链接</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/Hosted-Github-brightgreen?style=flat&amp;logo=GitHub&quot;</span> <span class="attr">title</span>=<span class="string">&quot;本站项目由Gtihub托管&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://hexo.io/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo&quot;</span> <span class="attr">title</span>=<span class="string">&quot;博客框架为Hexo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://butterfly.js.org/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/Theme-Butterfly-6513df?logoColor=white&amp;style=flat&amp;logo=buefy&quot;</span> <span class="attr">title</span>=<span class="string">&quot;主题采用butterfly&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://aliyun.com/product/cdn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/CDN-%E9%98%BF%E9%87%8C%E4%BA%91-orange?style=flat&amp;logo=alibabacloud&quot;</span> <span class="attr">title</span>=<span class="string">&quot;本站使用阿里云为静态资源提供CDN加速&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://beian.miit.gov.cn/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/%E6%B4%A5ICP%E5%A4%87-2021000769%E5%8F%B7--2-red?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==&quot;</span> <span class="attr">title</span>=<span class="string">&quot;备案号:津ICP备-2021000769号--2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://tongji.baidu.com/web/10000399748/overview/index?siteId=17522448&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/%E7%99%BE%E5%BA%A6-%E7%BB%9F%E8%AE%A1-blue?style=flat&amp;logo=baidu&quot;</span> <span class="attr">title</span>=<span class="string">&quot;本站采用百度统计进行网站管理与维护&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;margin-inline:5px&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris&quot;</span> <span class="attr">title</span>=<span class="string">&quot;本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>到<a href="http://tool.ggo.net/htmlpack/">HTML压缩网站</a>将代码压缩成一行，复制到footer属性中就完成Github-badge效果了</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2021</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">&lt;p&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://github.com/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Hosted-Github-brightgreen?style=flat&amp;logo=GitHub&quot;title=&quot;本站项目由Gtihub托管&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://hexo.io/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo&quot;title=&quot;博客框架为Hexo&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://butterfly.js.org/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Theme-Butterfly-6513df?logoColor=white&amp;style=flat&amp;logo=buefy&quot;title=&quot;主题采用butterfly&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://aliyun.com/product/cdn&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/CDN-%E9%98%BF%E9%87%8C%E4%BA%91-orange?style=flat&amp;logo=alibabacloud&quot;title=&quot;本站使用阿里云为静态资源提供CDN加速&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://beian.miit.gov.cn/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/%E6%B4%A5ICP%E5%A4%87-2021000769%E5%8F%B7--2-red?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==&quot;title=&quot;备案号:津ICP备-2021000769号-2&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;https://tongji.baidu.com/web/10000399748/overview/index?siteId=17522448&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/%E7%99%BE%E5%BA%A6-%E7%BB%9F%E8%AE%A1-blue?style=flat&amp;logo=baidu&quot;title=&quot;本站采用百度统计进行网站管理与维护&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris&quot;title=&quot;本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可&quot;&gt;&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">false</span> <span class="comment"># Copyright of theme and framework</span></span><br></pre></td></tr></table></figure><h3 id="3-10-评论系统valine">3.10 评论系统valine</h3><p><strong>开启评论</strong></p><p>在主题配置文件的<code>comments</code>中填写需要用的评论</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Valine</span> <span class="comment"># Valine,Disqus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Display comment count in post&#x27;s top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>use</td><td>使用的评论（请注意，最多支持两个，如果不需要请留空）</td></tr><tr><td>text</td><td>是否显示评论服务商的名字</td></tr><tr><td>lazyload</td><td>是否为评论开启lazyload，开启后，只有滚动到评论位置时才会加载评论所需要的资源（开启lazyload后，评论数将不显示）</td></tr><tr><td>count</td><td>是否在文章顶部显示评论数(livere、Giscus 和utterances 不支持评论数显示)</td></tr><tr><td>card_post_count</td><td>是否在首页文章卡片显示评论数(gitalk、livere 、Giscus 和utterances 不支持评论数显示)</td></tr></tbody></table><p><strong>配置Valine</strong></p><p>参考<a href="https://valine.js.org/quickstart.html">Valine文档</a>与<a href="https://github.com/xCss/Valine">Github项目</a></p><ol><li>注册LeanCloud：<a href="https://leancloud.cn/dashboard/login.html#/signup">国内版</a>注册使用需要域名备案，如果域名没有备案请使用<a href="https://console.leancloud.app/register">国际版</a>。</li><li>进入控制台，点击左下角创建应用</li></ol><p><img src="https://img.mahaofei.com/img/20220410162655.png" alt=""></p><ol start="3"><li>应用创建好后，进入应用界面，点击左下角的【设置-应用凭证】，可以看到APPID</li></ol><p><img src="https://img.mahaofei.com/img/20220410162923.png" alt=""></p><ol start="4"><li><p>将APPID和APPKey复制到主题配置文件的<code>valine</code>下</p></li><li><p>重新部署自己的网站，就可以看到评论系统了</p></li><li><p>在LeanCloud中：<code>登录&gt;选择你创建的应用&gt;存储&gt;选择Class Comment</code>，然后就可以管理评论了</p></li></ol><p><strong>Valine高级配置</strong></p><ol><li>头像配置</li></ol><table><thead><tr><th>参数值</th><th>表现形式</th><th>备注</th></tr></thead><tbody><tr><td>空字符串<code>''</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40" alt="Gravatar官方图形"></td><td>Gravatar官方图形</td></tr><tr><td><code>mp</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=mp" alt="神秘人(一个灰白头像)"></td><td>神秘人(一个灰白头像)</td></tr><tr><td><code>identicon</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=identicon" alt="抽象几何图形"></td><td>抽象几何图形</td></tr><tr><td><code>monsterid</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=monsterid" alt="小怪物"></td><td>小怪物</td></tr><tr><td><code>wavatar</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=wavatar" alt="用不同面孔和背景组合生成的头像"></td><td>用不同面孔和背景组合生成的头像</td></tr><tr><td><code>retro</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=retro" alt="八位像素复古头像"></td><td>八位像素复古头像</td></tr><tr><td><code>robohash</code></td><td><img src="https://gravatar.loli.net/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&amp;d=robohash" alt="机器人"></td><td>一种具有不同颜色、面部等的机器人</td></tr><tr><td><code>hide</code></td><td></td><td>不显示头像</td></tr></tbody></table><ol start="2"><li>自定义表情</li></ol><p>在Hexo根目录下的<code>source/_data/</code>下创建一个<code>valine.json</code>文件，文件内容为自定义表情，比如我们要用<code>Bilibili</code>的表情包(效果可以在评论区查看):</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> </span><br><span class="line"><span class="attr">&quot;tv_doge&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_亲亲&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;a8111ad55953ef5e3be3327ef94eb4a39d535d06.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_偷笑&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;bb690d4107620f1c15cff29509db529a73aee261.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_再见&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_冷漠&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_发怒&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_发财&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;34db290afd2963723c6eb3c4560667db7253a21a.png&quot;</span><span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_可爱&quot;</span> <span class="punctuation">:</span><span class="string">&quot;9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_吐血&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;09dd16a7aa59b77baa1155d47484409624470c77.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_呆&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_呕吐&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;9f996894a39e282ccf5e66856af49483f81870f3.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_困&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;241ee304e44c0af029adceb294399391e4737ef2.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_坏笑&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;1f0b87f731a671079842116e0991c91c2c88645a.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_大佬&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;093c1e2c490161aca397afc45573c877cdead616.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_大哭&quot;</span> <span class="punctuation">:</span><span class="string">&quot;23269aeb35f99daee28dda129676f6e9ea87934f.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_委屈&quot;</span><span class="punctuation">:</span> <span class="string">&quot;d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_害羞&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_尴尬&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_微笑&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_思考&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;90cf159733e558137ed20aa04d09964436f618a1.png&quot;</span> <span class="punctuation">,</span> </span><br><span class="line"><span class="attr">&quot;tv_惊吓&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;0d15c7e2ee58e935adc6a7193ee042388adc22af.png&quot;</span></span><br><span class="line"><span class="comment">// 更多表情</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>主页显示最近评论</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Aside widget - Newest Comments </span></span><br><span class="line"><span class="attr">newest_comments :</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order :</span> <span class="comment"># Don &#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># unit: mins, save data to localStorage</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-newest-comments.png" alt=""></p><h3 id="3-11-评论系统twikoo">3.11 评论系统twikoo</h3><p><strong>配置云环境</strong></p><ol><li>打开腾讯云，<a href="https://console.cloud.tencent.com/tcb/env/login?rid=4">创建云环境</a></li></ol><blockquote><p>应用模板：选择空模板，套餐选择包月免费套餐<br>环境信息：推荐创建上海环境。如选择广州环境，需要在 <code>twikoo.init()</code> 时额外指定环境 <code>region: &quot;ap-guangzhou&quot;</code>； 环境名称自由填写；推荐选择计费方式<code>包年包月</code>，套餐版本<code>免费版</code><br><img src="https://img.mahaofei.com/img/20220412085817.png" alt=""></p></blockquote><ol start="2"><li>进入【控制台-登录授权】，开启【匿名登陆】</li></ol><p><img src="https://img.mahaofei.com/img/20220412090355.png" alt=""></p><ol start="3"><li>进入【控制台-安全配置】，添加自己的域名和<code>localhost:4000</code></li></ol><blockquote><p>当你的博客使用了二级域名的场合，需要将完整的二级域名填入，而不是只填入主域名。</p></blockquote><ol start="4"><li>进入【控制台-云函数】，新建云函数</li></ol><p><img src="https://img.mahaofei.com/img/20220412090822.png" alt=""></p><ol start="5"><li><ol start="2"><li>函数名称请填写：<code>twikoo</code>，创建方式请选择：<code>空白函数</code>，运行环境请选择：<code>Nodejs 10.15</code>，函数内存请选择：<code>128MB</code>，点击“下一步”</li></ol></li></ol><p><img src="https://img.mahaofei.com/img/20220412090902.png" alt=""></p><ol start="6"><li>清空输入框中的示例代码，复制以下代码、粘贴到“函数代码”输入框中，点击“确定”</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exports.main = require(&#x27;twikoo-func&#x27;).main</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220412091047.png" alt=""></p><ol start="7"><li>创建完成后，点击“twikoo&quot;进入云函数详情页，进入“函数代码”标签，点击“文件 - 新建文件”，输入 <code>package.json</code>，复制以下代码、粘贴到代码框中，点击“保存并安装依赖”</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;dependencies&quot;: &#123; &quot;twikoo-func&quot;: &quot;1.5.3&quot; &#125; &#125;</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/20220412091344.png" alt=""></p><p><strong>Butterfly配置</strong></p><p>首先再主题配置文件中启用twikoo评论</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Comments System</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">twikoo</span> <span class="comment"># Valine,Disqus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Display comment count in post&#x27;s top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>进入【环境总览】，复制环境ID到主题配置文件的twikoo配置项中，这时使用<code>hexo clean &amp; hexo s</code>就可以看到twikoo评论框了</p><p>下载私钥，然后用记事本打开私钥文件，将内容复制。</p><p><img src="https://img.mahaofei.com/img/20220412091956.png" alt=""></p><p>打开<code>http://localhost:4000/</code>，再twikoo右下角点击齿轮，输入复制的密钥，并设置密码，即可完成注册</p><p><img src="https://img.mahaofei.com/img/20220412092724.png" alt=""></p><p>大功告成！</p><p><img src="https://img.mahaofei.com/img/20220412094538.png" alt=""></p><h3 id="3-12-Artitalk说说">3.12 Artitalk说说</h3><ol><li>前往 <a href="https://leancloud.app/">LeanCloud 国际版</a>，注册账号。</li><li>注册完成之后根据 LeanCloud 的提示绑定手机号和邮箱。</li><li>绑定完成之后点击<code>创建应用</code>，应用名称随意，接着在<code>结构化数据</code>中创建 <code>class</code>，命名为 <code>shuoshuo</code>。</li><li>在你新建的应用中找到<code>结构化数据</code>下的<code>用户</code>。点击<code>添加用户</code>，输入想用的用户名及密码。</li><li>回到<code>结构化数据</code>中，点击 <code>class</code> 下的 <code>shuoshuo</code>。找到权限，在 <code>Class 访问权限</code>中将 <code>add_fields</code> 以及 <code>create</code> 权限设置为指定用户，输入你刚才输入的用户名会自动匹配。为了安全起见，将 <code>delete</code> 和 <code>update</code> 也设置为跟它们一样的权限。</li><li>然后新建一个名为<code>atComment</code>的class，权限什么的使用默认的即可。</li><li>点击 <code>class</code> 下的 <code>_User</code> 添加列，列名称为 <code>img</code>，默认值填上你这个账号想要用的发布说说的头像url，这一项不进行配置，说说头像会显示为默认头像 —— Artitalk 的 logo。</li><li>在最菜单栏中找到设置-&gt; 应用 keys，记下来 <code>AppID</code> 和 <code>AppKey</code> ，一会会用。</li><li>最后将 <code>_User</code> 中的权限全部调为指定用户，或者数据创建者，为了保证不被篡改用户数据以达到强制发布说说。</li><li>安装<code>hexo-butterfly-artitalk</code>插件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-artitalk</span><br></pre></td></tr></table></figure><ol start="11"><li>在主题配置文件中添加如下配置</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Artitalk</span></span><br><span class="line"><span class="comment"># see https://artitalk.js.org/</span></span><br><span class="line"><span class="attr">artitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appId:</span>  <span class="comment"># 【必须】LeanCloud 创建应用中的 AppID</span></span><br><span class="line">  <span class="attr">appKey:</span>  <span class="comment"># 【必须】LeanCloud 创建应用中的 AppKEY</span></span><br><span class="line">  <span class="attr">path:</span>  <span class="comment"># 【任选】Artitalk的路径名称（默认为artitalk，生成的页面为artitalk/index.html）</span></span><br><span class="line">  <span class="attr">js:</span>  <span class="comment"># 【任选】更换Artitalk的js CDN（默认为https://cdn.jsdelivr.net/npm/artitalk）</span></span><br><span class="line">  <span class="attr">option:</span>  <span class="comment"># 【任选】Artitalk 需要的额外配置</span></span><br><span class="line">  <span class="attr">front_matter:</span>  <span class="comment"># 【任选】Arttalk页面的front_matter配置</span></span><br></pre></td></tr></table></figure><ol start="12"><li>默认的访问网址：<code>/artitalk/index.html</code></li></ol><p><img src="https://img.mahaofei.com/img/20220412165755.png" alt=""></p><h2 id="四、网站优化">四、网站优化</h2><h3 id="4-1-链接预加载">4.1 链接预加载</h3><p>当鼠标悬停到链接上超过65毫秒时，instantpage会对该链接进行预加载，提升访问速度。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://instant.page/</span></span><br><span class="line"><span class="comment"># prefetch (預加載)</span></span><br><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="4-2-SEO优化">4.2 SEO优化</h3><p><strong>优化链接</strong></p><p>采用<code>hexo-abbrlink</code>插件实现链接，后期不管怎么修改永久链接都不会变，不用考虑分类中文化的问题，并且更利于SEO。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><p>配置站点文件<code>config.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">post/:abbrlink.html</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>  <span class="comment"># 算法：crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>    <span class="comment"># 进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure><p><strong>生成新的站点地图</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><p><strong>百度资源平台管理站点</strong></p><p>打开<a href="https://ziyuan.baidu.com/">百度搜索资源平台</a>，进入【用户中心-站点管理-添加网站】，按照流程添加网站。</p><p>在验证阶段选择<strong>HTML标签验证</strong>，将<code>content</code>内容填入主题配置文件<code>site_verification</code>处部署后点击完成验证。</p><p>验证成功后，点击普通提交，首先提交<code>sitemap</code></p><p><img src="https://img.mahaofei.com/img/20220410152709.png" alt=""></p><p>然后如果想百度收录的更加及时，可以再配置API提交，首先需要安装额外的插件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><p>修改站点配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://github.com//xxx.github.io.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">baidu_url_submitter</span></span><br></pre></td></tr></table></figure><p>添加站点配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_url_submit:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">100</span> <span class="comment"># 提交最新的100个链接</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">https://www.mahaofei.com</span> <span class="comment"># 站点管理中添加的网站域名</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">xR6nigjGWFHyybFO</span> <span class="comment"># token可以在API提交页面找到</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidu_urls.txt</span> <span class="comment"># 文本文档的地址，新链接会保存在此文本文档里</span></span><br></pre></td></tr></table></figure><p>此后每次 <code>hexo d</code>都会进行API提交</p><p><strong>谷歌收录</strong></p><p>进入<a href="https://search.google.com/search-console/welcome">Google Search Console</a>，进行网站验证</p><p><img src="https://img.mahaofei.com/img/20220410154319.png" alt=""></p><p>验证成功后，进入配置页面，点击<strong>Sitemaps</strong>，提交自己的Sitemap文件就可以了。</p><p><img src="https://img.mahaofei.com/img/20220410154520.png" alt=""></p><h2 id="五、博客撰写">五、博客撰写</h2><h3 id="3-1-页面配置Page-Front-matter">3.1 页面配置Page Front-matter</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span></span><br><span class="line"><span class="attr">date:</span></span><br><span class="line"><span class="attr">updated:</span></span><br><span class="line"><span class="attr">type:</span></span><br><span class="line"><span class="attr">comments:</span></span><br><span class="line"><span class="attr">description:</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">top_img:</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line"><span class="attr">katex:</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line"><span class="attr">aplayer:</span></span><br><span class="line"><span class="attr">highlight_shrink:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>写法</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>【必需】页面标题</td></tr><tr><td>date</td><td>【必需】页面创建日期</td></tr><tr><td>type</td><td>【必需】标签、分类和友情链接三个页面需要配置</td></tr><tr><td>updated</td><td>【可选】页面更新日期</td></tr><tr><td>description</td><td>【可选】页面描述</td></tr><tr><td>keywords</td><td>【可选】页面关键字</td></tr><tr><td>comments</td><td>【可选】显示页面评论模块(默认true)</td></tr><tr><td>top_img</td><td>【可选】页面顶部图片</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认false)</td></tr><tr><td>katex</td><td>【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认false)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏(默认true)</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音樂 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td></tr></tbody></table><h3 id="3-2-文章页配置">3.2 文章页配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--- </span></span><br><span class="line"><span class="attr">title:</span> </span><br><span class="line"><span class="attr">date:</span> </span><br><span class="line"><span class="attr">updated:</span> </span><br><span class="line"><span class="attr">tags:</span> </span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="attr">keywords:</span> </span><br><span class="line"><span class="attr">description:</span> </span><br><span class="line"><span class="attr">top _img:</span> </span><br><span class="line"><span class="attr">comments:</span> </span><br><span class="line"><span class="attr">cover:</span> </span><br><span class="line"><span class="attr">toc:</span> </span><br><span class="line"><span class="attr">toc_ number:</span> </span><br><span class="line"><span class="attr">toc _style_ simple:</span> </span><br><span class="line"><span class="attr">copyright:</span> </span><br><span class="line"><span class="attr">copyright _author:</span> </span><br><span class="line"><span class="attr">copyright_ author _href:</span> </span><br><span class="line"><span class="attr">copyright_ url:</span> </span><br><span class="line"><span class="attr">copyright _info:</span> </span><br><span class="line"><span class="attr">mathjax:</span> </span><br><span class="line"><span class="attr">katex:</span> </span><br><span class="line"><span class="attr">aplayer:</span> </span><br><span class="line"><span class="attr">highlight_ shrink:</span> </span><br><span class="line"><span class="attr">aside:</span> </span><br><span class="line"><span class="attr">stick:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>写法</th><th>解释</th></tr></thead><tbody><tr><td>title</td><td>【必需】文章标题</td></tr><tr><td>date</td><td>【必需】文章创建日期</td></tr><tr><td>updated</td><td>【可选】文章更新日期</td></tr><tr><td>tags</td><td>【可选】文章标签</td></tr><tr><td>categories</td><td>【可选】文章分类</td></tr><tr><td>keywords</td><td>【可选】文章关键字</td></tr><tr><td>description</td><td>【可选】文章描述</td></tr><tr><td>top_img</td><td>【可选】文章顶部图片</td></tr><tr><td>cover</td><td>【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空)</td></tr><tr><td>comments</td><td>【可选】显示文章评论模块(默认true)</td></tr><tr><td>toc</td><td>【可选】显示文章TOC(默认为设置中toc的enable配置)</td></tr><tr><td>toc_number</td><td>【可选】显示toc_number(默认为设置中toc的number配置)</td></tr><tr><td>toc_style_simple</td><td>【可选】显示toc 简洁模式</td></tr><tr><td>copyright</td><td>【可选】显示文章版权模块(默认为设置中post_copyright的enable配置)</td></tr><tr><td>copyright_author</td><td>【可选】文章版权模块的文章作者</td></tr><tr><td>copyright_author_href</td><td>【可选】文章版权模块的文章作者链接</td></tr><tr><td>copyright_url</td><td>【可选】文章版权模块的文章連結链接</td></tr><tr><td>copyright_info</td><td>【可选】文章版权模块的版權聲明文字</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认false)</td></tr><tr><td>katex</td><td>【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认false)</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音樂 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏(默认true)</td></tr><tr><td>stick</td><td>【可选】文章置顶(默认0不置顶，设置1时置顶)</td></tr></tbody></table><h3 id="3-3-Butterfly主题可用功能">3.3 Butterfly主题可用功能</h3><p><strong>Tag Inline</strong></p><p>类似于查题网站，点击查看答案按钮，显示答案</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/#tag-hide">https://butterfly.js.org/posts/4aa8abbe/#tag-hide</a></p><p><strong>mermail</strong></p><p>使用mermaid标签可以绘制Flowchart（流程图）、Sequence diagram（时序图）、Class Diagram（类别图）、State Diagram（状态图）、Gantt（甘特图）和Pie Chart（圆形图）</p><p><a href="https://butterfly.js.org/posts/4aa8abbe/#mermaid">https://butterfly.js.org/posts/4aa8abbe/#mermaid</a></p><p><strong>Tabs</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125; </span><br><span class="line">&lt;!-- tab 第一个Tab --&gt; </span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line"> &lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt; </span><br><span class="line"><span class="strong">**只有图标没有Tab名字**</span></span><br><span class="line"> &lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt; </span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line"> &lt;!-- endtab --&gt; </span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p><strong>Button</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url] : 链接</span><br><span class="line">[text] : 按钮文字</span><br><span class="line">[icon] : [可选] 图标</span><br><span class="line">[color] : [可选] 按钮背景颜色(默认style时）</span><br><span class="line"><span class="code">                      按钮字体和边框颜色(outline时) </span></span><br><span class="line"><span class="code">                      default/blue/pink/red/purple/orange/green </span></span><br><span class="line"><span class="code">[style] : [可选] 按钮样式默认实心</span></span><br><span class="line"><span class="code">                      outline/留空</span></span><br><span class="line"><span class="code">[layout] : [可选] 按钮布局默认为line </span></span><br><span class="line"><span class="code">                      block/留空</span></span><br><span class="line"><span class="code">[position] : [可选] 按钮位置前提是设置了layout为block 默认为左边</span></span><br><span class="line"><span class="code">                      center/right/留空</span></span><br><span class="line"><span class="code">[size] : [可选] 按钮大小</span></span><br><span class="line"><span class="code">                      larger/留空</span></span><br></pre></td></tr></table></figure><p><strong>inlineImg</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src] : 图片链接</span><br><span class="line">[height] ： 图片高度限制【可选】</span><br></pre></td></tr></table></figure><p><strong>label</strong></p><p>高亮所需的文字</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br><span class="line">[text] : 文字</span><br><span class="line">[color] : 【可选】背景颜色，默认为default</span><br><span class="line">default/blue/pink/red/purple/orange/green</span><br></pre></td></tr></table></figure><p><strong>timeline</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125; </span><br><span class="line">&lt;!-- timeline title --&gt; </span><br><span class="line">xxxxx </span><br><span class="line">&lt;!-- endtimeline --&gt; </span><br><span class="line">&lt;!-- timeline title --&gt; </span><br><span class="line">xxxxx </span><br><span class="line">&lt;!-- endtimeline --&gt; </span><br><span class="line">&#123;% endtimeline %&#125;</span><br><span class="line"></span><br><span class="line">[title] : 标题/时间线</span><br><span class="line">[color]: timeline 颜色</span><br><span class="line">default(留空) / blue / pink / red / purple / orange / green</span><br></pre></td></tr></table></figure><p><strong>flink</strong></p><p>可在任何界面插入类似友情链接列表效果</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% flink %&#125; </span><br><span class="line"><span class="bullet">-</span> class <span class="emphasis">_name: 友情链接</span></span><br><span class="line"><span class="emphasis">  class_</span> desc: 那些人，那些事</span><br><span class="line">  link <span class="emphasis">_list: </span></span><br><span class="line"><span class="emphasis">    - name: JerryC </span></span><br><span class="line"><span class="emphasis">      link: https://jerryc.me/ </span></span><br><span class="line"><span class="emphasis">      avatar: https://jerryc.me/img/avatar.png </span></span><br><span class="line"><span class="emphasis">      descr: 今日事,今日毕</span></span><br><span class="line"><span class="emphasis">    - name: Hexo </span></span><br><span class="line"><span class="emphasis">      link: https://hexo.io/zh-tw/ </span></span><br><span class="line"><span class="emphasis">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg </span></span><br><span class="line"><span class="emphasis">      descr: 快速、简单且强大的网志框架</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">- class_</span> name: 网站</span><br><span class="line">  class <span class="emphasis">_desc: 值得推荐的网站</span></span><br><span class="line"><span class="emphasis">  link_</span> list: </span><br><span class="line"><span class="bullet">    -</span> name: Youtube </span><br><span class="line"><span class="code">      link: https://www.youtube.com/ </span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png </span></span><br><span class="line"><span class="code">      descr: 视频网站</span></span><br><span class="line"><span class="code">    - name: Weibo </span></span><br><span class="line"><span class="code">      link: https://www.weibo.com/ </span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png </span></span><br><span class="line"><span class="code">      descr: 中国最大社交分享平台</span></span><br><span class="line"><span class="code">    - name: Twitter </span></span><br><span class="line"><span class="code">      link: https://twitter.com/ </span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png </span></span><br><span class="line"><span class="code">      descr: 社交分享平台</span></span><br><span class="line"><span class="code">&#123;% endflink %&#125;</span></span><br></pre></td></tr></table></figure><h1>博客备份</h1><h2 id="创建新分支">创建新分支</h2><p>不过在建立新分支前请确保仓库内<strong>已有master分支</strong>（Hexo本地建站后第一次上传时会自动生成）。<br>然后创建一个用来备份的分支hexo，并且将其设置为默认分支。</p><h2 id="获取-git文件夹">获取 .git文件夹</h2><p>原始的博客文件夹只有<code>.deploy_git</code>文件夹，是没有.git文件夹的，于是我们先去桌面或者哪里随便一个地方，把刚刚的hexo分支给clone下来。然后复制出里面的.git文件夹，复制到现在的博客文件夹中。</p><p>在博客文件夹中检查是否有<code>.gitignore</code>文件，如果没有最好手动添加一个，用于上传时忽略一些不必要的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>：如果你之前克隆过theme中的主题文件，那么应该把主题文件中的.git文件夹删掉，因为git不能嵌套上传，最好是显示隐藏文件，检查一下有没有，否则上传的时候会出错，导致你的主题文件无法上传，这样你的配置在别的电脑上就用不了了。</p></blockquote><h2 id="备份博客">备份博客</h2><p>通过如下命令将本地文件备份到Github上。</p><p>在hexo博客的根目录下执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;Backup&quot;</span><br><span class="line">git push origin hexo</span><br></pre></td></tr></table></figure><h2 id="恢复博客">恢复博客</h2><p>目前假设本地Hexo博客基础环境已经搭好：比如安装git<br>、nodejs、hexo安装等等。</p><p>输入下列命令克隆博客必须文件(hexo分支)：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/yourgithubname/yourgithubname.github.io</span><br></pre></td></tr></table></figure><p>在clone下来的那个文件夹里面执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli</span><br><span class="line">npm install hexo-deployer-git</span><br></pre></td></tr></table></figure><p>不需要执行<code>hexo init</code>，直接继续安装原来安装的一些插件，然后就完成了</p>]]></content>
    
    
    <summary type="html">本站博客ButterFly主题配置的全部方法，呕心沥血整理版，供各位同样使用ButterFly主题的朋友参考。同样记录了Hexo博客的备份方法，防止更换电脑或电脑崩溃后数据丢失。</summary>
    
    
    
    <category term="随笔" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="经验" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/%E7%BB%8F%E9%AA%8C/"/>
    
    
  </entry>
  
  <entry>
    <title>阿里云图床搭建方法</title>
    <link href="https://www.mahaofei.com/post/d05a7f72.html"/>
    <id>https://www.mahaofei.com/post/d05a7f72.html</id>
    <published>2022-03-26T06:37:22.000Z</published>
    <updated>2022-03-26T06:37:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>由于现在一直在CSDN和自己的网站同步写博客记录，可是以前我都是在CSDN编辑器内直接码字上传，但这样的编辑方式很难受，我还是更喜欢像Typora的本地markdown编辑器，这样就需要有一个自己的图床，本地截图粘贴到markdown编辑器内，就会自动上传到自己的图床中。</p><h1>开通阿里云OSS服务</h1><p>首先需要开通<a href="https://www.aliyun.com/product/oss">阿里云OSS服务</a>，登录账号后直接点击立即开通就可以。</p><p>阿里云提供了两种计费方式：</p><ul><li>按量收费：这是默认的计费方式，开通OSS后就是这种方式，不需要提前付款，使用后会直接从账户内扣钱。</li><li>包月包年套餐：点击折扣套餐可以看到各种不同容量和时间的套餐</li></ul><p>由于我在这里只存储写博客用到的图片，每张图片只有几十K，就算是最小的40G套餐我也是远远用不到的，因此我选择按量收费，也就是这里不操作，直接下一步。</p><h1>新建Bucket</h1><p>Bucket相当于存储图片的容器，这里新建Bucket。</p><ul><li>输入Bucket的名称：生成链接后，链接名称的组成部分（*****.oss-cn-beijing.aliyuncs.com）</li><li>区域：选择一个离你最近的就可以</li><li>存储类型：一般选择标准存储</li><li>读写权限：必须选择公共读，否则其他人无法访问图片</li><li>剩余的服务都不需要开启</li></ul><p>打开Bucket列表，在刚创建的bucket下新建一个目录img，用于存放博客图片。</p><p><img src="https://img.mahaofei.com/img/202203260958360.png" alt=""></p><h1>获取阿里云AccessKey</h1><p>鼠标移动到阿里云首页右上角个人头像，点击AccessKey管理。</p><p>进入页面后可能会出现安全提示，点击继续使用AccessKey。</p><p>点击创建AccessKey，通过验证后就可以看到AccessKey了。</p><p>这里的AccessKey ID和AccessKey Secret一定要记录好，而且一定不能公开。</p><h1>下载安装Picgo</h1><p>下面是Picgo项目的Github链接，直接在这里下载就可以。<br><a href="https://github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a></p><h1>配置Picgo</h1><p>在Picgo设置里勾选显示阿里云OSS图床（默认已经打开了很多常用图床）</p><p>在图床设置-阿里云OSS设置内，填写自己的信息</p><p><img src="https://img.mahaofei.com/img/202203260959238.png" alt=""></p>]]></content>
    
    
    <summary type="html">由于现在一直在CSDN和自己的网站同步写博客记录，可是以前我都是在CSDN编辑器内直接码字上传，但这样的编辑方式很难受，我还是更喜欢像Typora的本地markdown编辑器，这样就需要有一个自己的图床，本地截图粘贴到markdown编辑器内，就会自动上传到自己的图床中。</summary>
    
    
    
    <category term="程序设计" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="网站" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E7%BD%91%E7%AB%99/"/>
    
    
    <category term="网站搭建" scheme="https://www.mahaofei.com/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/"/>
    
    <category term="阿里云" scheme="https://www.mahaofei.com/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>博途TIA Portal V15 下载与安装教程</title>
    <link href="https://www.mahaofei.com/post/bb559113.html"/>
    <id>https://www.mahaofei.com/post/bb559113.html</id>
    <published>2022-02-04T07:58:00.000Z</published>
    <updated>2022-02-04T07:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>下载链接：</p><p>阿里云盘：<a href="https://www.aliyundrive.com/s/G5V98sQFqVq">https://www.aliyundrive.com/s/G5V98sQFqVq</a></p><p>百度网盘： <a href="https://pan.baidu.com/s/1X3hMP5n2DlMXB_wiGztarg?pwd=dpzk">https://pan.baidu.com/s/1X3hMP5n2DlMXB_wiGztarg?pwd=dpzk</a></p><p>提取码: dpzk</p></blockquote><h2 id="准备工作">准备工作</h2><p>在安装西门子软件的时候，经常提示要重启，而且重启之后依然提示重启，让人莫名烦恼， 按照以下步骤删除注册表则不会再提示重启。<br><font color="red">注意：删除注册表后不要重启，直接继续安装，（删除此文件对电脑没有任何影响）</font></p><ol><li>在windows系统下，按下组合键：WIN+R，输入“regedit”，打开注册表编辑器<br><img src="https://img.mahaofei.com/img/202203261044325.png" alt="">找到 HEEY_LOCAL_MACHINE\SYSTEM\CURRENTCONTROLSET\CONTROL\SESSION MANAGE\ 下的 PendingFileRemameOpeaations 键，直接删除该键值。不需要重新启动，继续你的软件安装即可。<br><img src="https://img.mahaofei.com/img/202203261044343.png" alt=""></li></ol><blockquote><p>安装前注意：</p><ul><li>V15 支持WIN11 WIN10  WIN8  WIN7, 但必须都是64位系统</li><li>文件下载完成，安装出现安装过程中出错，则重新安装或修复，如果再次安装仍出现此问题则只能重新安装系统后再装软件，之所以出现这种问题，因为博途软件较庞大，所用到的数据库文件非常复查，系统内含有其他第三方软件可能导致博途安装无法正常成功，所以尽量保持系统的纯净再安装，切记，万不能开始各种杀毒软件，尤其360，否在无法保证是否能成功，或者安装完成能否正常使用。</li></ul></blockquote><h2 id="font-color-red-安装前一定要关闭杀毒软件-font"><font color="red">安装前一定要关闭杀毒软件</font></h2><h2 id="开始安装软件">开始安装软件</h2><h3 id="①-安装STEP7-Professional">① 安装STEP7 Professional</h3><ol><li>将安装包解压，进入<strong>01-STEP7+Wincc Profesional V15</strong>文件夹，运行<strong>TIA_Portal_STEP_7_Pro_WINCC_Pro_V15.exe</strong>，首先安装SETP7 Professional（PLC编程软件+WINCC触摸屏和上位机组态软件）<br><img src="https://img.mahaofei.com/img/202203261045172.png" alt=""></li><li>选择要安装的位置（尽量避免解压在C盘），然后点击下一步等待解压，解压过程5分钟左右<br><img src="https://img.mahaofei.com/img/202203261045963.png" alt=""></li><li>开始正式安装，<strong>直接点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261045632.png" alt=""></li><li>语言选择默认勾选中文，<strong>直接下一步</strong><br><img src="https://img.mahaofei.com/img/202203261045370.png" alt=""></li><li>默认典型安装即可，<strong>浏览选择安装路径</strong>，然后<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261045522.png" alt=""></li><li><strong>勾选接受两个条款协议</strong>，然后<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261045996.png" alt=""></li><li><strong>勾选接受</strong>安全和权限设置，然后<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261045675.png" alt=""></li><li>确认安装路径没问题后，<strong>点击安装按钮</strong>，开始进行安装，安装过程约40分钟<br><img src="https://img.mahaofei.com/img/202203261045605.png" alt=""></li><li><strong>选择立即重启</strong>，完成安装（这里需要重启电脑，否则无法进行后续安装）</li></ol><h3 id="②-安装STEP7-Simulation">② 安装STEP7_Simulation</h3><ol><li>进入<strong>02-PLCSIM_V15</strong>文件夹，双击运行<strong>SIMATIC_S7PLCSIM_V15.exe</strong>，开始安装STEP7_simulation（PLC的仿真软件）<br><img src="https://img.mahaofei.com/img/202203261046807.png" alt=""></li><li>开始安装，直接<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261046519.png" alt=""></li><li>安装语言默认选择中文，<strong>直接下一步</strong><br><img src="https://img.mahaofei.com/img/202203261046465.png" alt=""></li><li><strong>选择安装文件解压路径（不要和上一个程序选择同一路径，否则会出现文件覆盖问题）</strong>，然后<strong>点击下一步</strong>，等待解压，此过程约3分钟<br><img src="https://img.mahaofei.com/img/202203261046214.png" alt=""></li><li>进入安装程序，点击下一步开始安装<br><img src="https://img.mahaofei.com/img/202203261046805.png" alt=""></li><li>默认选择中文，<strong>点击下一步</strong>继续<br><img src="https://img.mahaofei.com/img/202203261046058.png" alt=""></li><li>浏览<strong>选择安装路径</strong>，然后<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261046718.png" alt=""></li><li><strong>接受条款协议</strong>，然后<strong>点击下一步</strong><br><img src="https://img.mahaofei.com/img/202203261047339.png" alt=""></li><li>接受计算机安全和权限设置，点击下一步<br><img src="https://img.mahaofei.com/img/202203261047195.png" alt=""></li><li><strong>检查安装路径</strong>没问题，<strong>点击安装按钮</strong>开始安装软件12<br><img src="https://img.mahaofei.com/img/202203261047722.png" alt=""></li><li>选择稍后重启，完成安装<br><img src="C:%5CUsers%5C82785%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220326104732524.png" alt="image-20220326104732524"></li></ol><h3 id="③-安装驱动（如果只仿真，不需要连接PLC可跳过安装）">③ 安装驱动（如果只仿真，不需要连接PLC可跳过安装）</h3><ol><li>进入<strong>Startdrive</strong>文件夹中，双击运行<strong>Startdrive_V15.exe</strong>，按步骤进行安装<br><img src="https://img.mahaofei.com/img/202203261047076.png" alt=""></li></ol><h3 id="④-授权">④ 授权</h3><ol><li>在授权文件夹下找到<strong>Sim_EKB_Install_2018_11_14.exe</strong>文件，右键<strong>以管理员身份运行</strong><br><img src="https://img.mahaofei.com/img/202203261047455.png" alt=""></li><li>授权Step7 Professional<br><img src="https://img.mahaofei.com/img/202203261047872.png" alt=""></li><li>授权WinCC，找到TIA Portal  --TIA Portal V15 –WINCC Prof v15，按图找到几个选项后点击安装长密钥<br><img src="https://img.mahaofei.com/img/202203261047560.png" alt=""></li><li>然后关闭程序，重启计算机</li></ol><blockquote><p>如果重启后打开软件授权不成功，则在C盘找到AX NF  ZZ文件夹删除（如果找不到，请打开显示隐藏文件夹）<br><img src="https://img.mahaofei.com/img/202203261048361.png" alt=""><br>如果以上步骤操作完毕仍然无法授权，则需要重装Windows纯净系统，不要再安装任何其他软件和杀毒管家等，直接安装博途</p></blockquote><p>在桌面找到TIA Portal V15软件，双击运行，可正常启动<br><img src="https://img.mahaofei.com/img/202203261048756.png" alt=""><br><img src="https://img.mahaofei.com/img/202203261048505.png" alt=""></p>]]></content>
    
    
    <summary type="html">西门子PLC自动化设计软件博途V15的安装教程。</summary>
    
    
    
    <category term="嵌入式" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    <category term="单片机" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%8D%95%E7%89%87%E6%9C%BA/"/>
    
    
    <category term="软件安装" scheme="https://www.mahaofei.com/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    <category term="PLC" scheme="https://www.mahaofei.com/tags/PLC/"/>
    
  </entry>
  
  <entry>
    <title>河北工业大学机械电子工程专业课程资料（个人整理，请勿外传）</title>
    <link href="https://www.mahaofei.com/post/21df2adf.html"/>
    <id>https://www.mahaofei.com/post/21df2adf.html</id>
    <published>2022-01-05T16:00:00.000Z</published>
    <updated>2022-01-05T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="公共课">公共课</h2><h3 id="大二上"><em>大二上</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/vNZ6TSj6WJd">线性代数</a></th><th><a href="https://www.aliyundrive.com/s/6QjzPDqcgF1">大学物理</a></th><th><a href="https://www.aliyundrive.com/s/LWNGU81AUWZ">马克思主义基本原理概论</a></th></tr></thead></table><h3 id="大二下"><em>大二下</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/3aFWBAdyhgR">概率论与数理统计</a></th><th><a href="https://www.aliyundrive.com/s/248XLLcHYHp">毛泽东思想和中国特色社会主义理论体系概论</a></th><th>       </th></tr></thead></table><h2 id="专业课">专业课</h2><h3 id="大二下-2"><em>大二下</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/ikNAzyqmWAf">电工电子技术</a></th><th><a href="https://www.aliyundrive.com/s/BBwwM9t2dNc">机械原理</a></th><th><a href="https://www.aliyundrive.com/s/cWbKWUMy2yc">材料力学</a></th></tr></thead><tbody><tr><td><strong><a href="https://www.aliyundrive.com/s/Fs51pUPd4dm">互换性与测量技术</a></strong></td><td></td><td></td></tr></tbody></table><h3 id="大三上"><em>大三上</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/pFNWexCiLqY">机械设计</a></th><th><a href="https://www.aliyundrive.com/s/2CJKUJzjouK">机电传动与控制</a></th><th><a href="https://www.aliyundrive.com/s/YLHZLGZeWSC">液压传动与控制</a></th></tr></thead><tbody><tr><td><strong><a href="https://www.aliyundrive.com/s/BvQ7FgyCAMy">自动控制原理</a></strong></td><td></td><td></td></tr></tbody></table><h3 id="大三下"><em>大三下</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/Z7ZEtnbsPov">传感与检测技术</a></th><th><a href="https://www.aliyundrive.com/s/dL2cZ1g2n5Q">微机原理及应用</a></th><th><a href="https://www.aliyundrive.com/s/3Fj4pxuYNRz">机械制造技术基础</a></th></tr></thead><tbody><tr><td><strong><a href="https://www.aliyundrive.com/s/FEPhcgfyKTq">机械动力学</a></strong></td><td></td><td></td></tr></tbody></table><h3 id="大四上"><em>大四上</em></h3><table><thead><tr><th><a href="https://www.aliyundrive.com/s/h2Ayhm17cC6">数控技术</a></th><th><a href="https://www.aliyundrive.com/s/5SzkVMMrZK6">机器人技术及应用</a></th><th><a href="https://www.aliyundrive.com/s/k4BYhySnW6a">机电系统建模仿真</a></th></tr></thead><tbody><tr><td><a href="https://www.aliyundrive.com/s/iExSacLgtt4"><strong>机电系统设计</strong></a></td><td><a href="https://www.aliyundrive.com/s/PWFoXhRDv5Z"><strong>电气控制与PLC</strong></a></td><td></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">博主本科期间各课程所用到的资料汇总，包括公共课（如线代、大物），专业课等等。由于多数为本校老师个人制作使用的PPT、知识点资料，因此请仅用于个人学习使用，谢谢。</summary>
    
    
    
    <category term="随笔" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="经验" scheme="https://www.mahaofei.com/categories/%E9%9A%8F%E7%AC%94/%E7%BB%8F%E9%AA%8C/"/>
    
    
  </entry>
  
  <entry>
    <title>PS2020 下载与安装教程（可更改安装位置）</title>
    <link href="https://www.mahaofei.com/post/f43c25b0.html"/>
    <id>https://www.mahaofei.com/post/f43c25b0.html</id>
    <published>2021-12-23T01:15:35.000Z</published>
    <updated>2021-12-23T01:15:35.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>阿里云盘链接：<a href="https://www.aliyundrive.com/s/UFEbPAqUVvD">https://www.aliyundrive.com/s/UFEbPAqUVvD</a></p><p>下载后将文件的后缀名改回【.zip】即可正常解压。</p><p>百度网盘链接：<a href="https://pan.baidu.com/s/1-GCMRxMQLGaOBn_dtcgJmw">https://pan.baidu.com/s/1-GCMRxMQLGaOBn_dtcgJmw</a></p><p>提取码：mhf6</p></blockquote><ol><li>打开解压的文件夹，右键【Set-up.exe】，<strong>以管理员身份运行</strong><br><img src="https://img.mahaofei.com/img/202112230952400-ps2020-1.png" alt=""></li><li>点击右侧按钮<strong>更改安装位置</strong>，安装到除C盘外的区域<br><img src="https://img.mahaofei.com/img/202112230953657-ps2020-2.png" alt=""></li><li><strong>点击继续</strong>，开始安装<br><img src="https://img.mahaofei.com/img/202112230953836-ps2020-3.png" alt=""></li><li>安装过程大约需要3分钟，安装过程自动破解，安装完成就可以直接使用。<br><img src="https://img.mahaofei.com/img/202112230953164-ps2020-4.png" alt=""><br><img src="https://img.mahaofei.com/img/202112230953914-ps2020-5.png" alt=""></li><li>打开软件，可以正常使用<br><img src="https://img.mahaofei.com/img/202112230953060-ps2020-6.png" alt=""></li></ol>]]></content>
    
    
    <summary type="html">Adobe PhotoShop 2020 下载与安装的教程，专业P图软件，安装可更改位置。资源仅供学习参考！</summary>
    
    
    
    <category term="技巧" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="软件安装" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="软件安装" scheme="https://www.mahaofei.com/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>PR2020 下载与安装教程（可更改安装位置）</title>
    <link href="https://www.mahaofei.com/post/f5998c06.html"/>
    <id>https://www.mahaofei.com/post/f5998c06.html</id>
    <published>2021-12-23T01:15:35.000Z</published>
    <updated>2021-12-23T01:15:35.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>阿里云盘链接：<a href="https://www.aliyundrive.com/s/QYQ5oszJVSq">https://www.aliyundrive.com/s/QYQ5oszJVSq</a></p><p>下载后将文件的后缀名改回【.zip】即可正常解压。</p><p>百度网盘链接：<a href="https://pan.baidu.com/s/1vQgVLG2Im4VKELuOwQ2zyg">https://pan.baidu.com/s/1vQgVLG2Im4VKELuOwQ2zyg</a></p><p>提取码：mhf6</p></blockquote><ol><li><p>打开解压的文件夹，右键【Set-up.exe】，<strong>以管理员身份运行</strong><br><img src="https://img.mahaofei.com/img/202112230954169-pr2020-1.png" alt=""></p></li><li><p>点击右侧按钮<strong>更改安装位置</strong>，安装到除C盘外的区域<br><img src="https://img.mahaofei.com/img/202112230955092-pr2020-2.png" alt=""></p></li><li><p>安装过程大约需要3分钟，安装过程自动破解，安装完成就可以直接使用。<br><img src="https://img.mahaofei.com/img/202112230955695-pr2020-3.png" alt=""><br><img src="https://img.mahaofei.com/img/202112230955657-pr2020-4.png" alt=""></p></li><li><p>打开软件，可以正常使用<br><img src="https://img.mahaofei.com/img/202112230955835-pr2020-5.png" alt=""></p></li></ol>]]></content>
    
    
    <summary type="html">Adobe Premiere Pro 2020 下载与安装的教程，视频剪辑软件，安装可更改位置。资源仅供学习参考！</summary>
    
    
    
    <category term="技巧" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="软件安装" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="软件安装" scheme="https://www.mahaofei.com/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>Office2019专业版安装教程</title>
    <link href="https://www.mahaofei.com/post/197d036c.html"/>
    <id>https://www.mahaofei.com/post/197d036c.html</id>
    <published>2021-12-23T01:15:35.000Z</published>
    <updated>2021-12-23T01:15:35.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>阿里云盘链接：<a href="https://www.aliyundrive.com/s/PNmJsdoM9AD">https://www.aliyundrive.com/s/PNmJsdoM9AD</a><br>下载完成后将后缀名改回【.zip】即可正常解压</p><p>百度网盘链接：<a href="https://pan.baidu.com/s/15yVE9_3PUWwb9tHZKwzB_w">https://pan.baidu.com/s/15yVE9_3PUWwb9tHZKwzB_w </a><br>提取码：mhf6</p></blockquote><p>安装之前，先到【控制面板-卸载程序】，卸载掉所有Office产品。</p><ol><li><p>解压压缩包，运行【<strong>Setup64.exe</strong>】<br><img src="https://img.mahaofei.com/img/202112230940086-office2019-1.png" alt=""></p></li><li><p>等待20分钟左右安装，只能安装在C盘。</p></li><li><p>安装完成后在开始菜单打开，可以正常使用</p></li><li><p>如果需要激活，可以使用<a href="https://huffie.lanzouw.com/idn0Cuhmwzg">【此工具】</a>进行激活。</p></li></ol>]]></content>
    
    
    <summary type="html">Microsoft Office 2019 专业版，下载与安装过程详解。</summary>
    
    
    
    <category term="技巧" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/"/>
    
    <category term="软件安装" scheme="https://www.mahaofei.com/categories/%E6%8A%80%E5%B7%A7/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="软件安装" scheme="https://www.mahaofei.com/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>【目标识别】SIFT算法理论部分</title>
    <link href="https://www.mahaofei.com/post/f8e83802.html"/>
    <id>https://www.mahaofei.com/post/f8e83802.html</id>
    <published>2021-12-21T13:31:40.000Z</published>
    <updated>2021-12-21T13:31:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、介绍-2">一、介绍</h2><h3 id="1-1-SIFT算法">1.1 SIFT算法</h3><p>SIFT(Scale invariant feature transform)是尺度不变特征变换，是一种用来检测和描述图像局部特征的算法。算法实际上是要在不同尺度空间中寻找极值点，并提取其位置、尺度和旋转不变量，这些关键点不会因光照、仿射变换和噪音而变化。</p><h3 id="1-2-SIFT特征的获取方法">1.2 SIFT特征的获取方法</h3><ol><li><p><strong>尺度空间极值检测</strong></p><p>利用高斯差分函数搜索所有尺度和图像位置，找到对尺度和方向不变的候选关键点。</p></li><li><p><strong>关键点定位</strong></p><p>对每一个候选关键点都需要确定其位置和尺度，并要保证其稳定性。</p></li><li><p><strong>方向分配</strong></p><p>根据局部图像的梯度方向，为每个关键点分配一个或多个方向。</p></li><li><p><strong>关键点描述</strong></p><p>在每个关键点周围区域的选定尺度上测量局部图像的梯度，这些信息表示了允许的局部形状失真和光照变化。</p></li></ol><h3 id="1-3-图像匹配和识别的方法">1.3 图像匹配和识别的方法</h3><ol><li>先从一组目标物体的参考图像中提取SIFT特征并存储在数据库。</li><li>将新图像的每个特征与之前的数据库逐一比较，根据特征向量的欧几里得距离找到匹配特征。</li></ol><h3 id="1-4-如何提高匹配准确率">1.4 如何提高匹配准确率</h3><ol><li><p>利用识别与新图像中对象的位置、比例和方向一致的关键点子集，可以在匹配集中过滤出正确的匹配。几个特征共同作为判断依据匹配出错率远小于单一特征匹配。</p></li><li><p>匹配方法</p><p>①先对物体姿态的放射近似作最小二乘估计，与此姿态一致的其它图像特征被识别出来，异常值被丢弃。</p><p>②给出你和的准确性和可能的错误匹配的数量，对一组特征表明对象存在的概率进行详细计算。</p><p>③通过所有测试的对象匹配可被标为正确且具有高可信度。</p></li></ol><h2 id="二、尺度空间极值检测">二、尺度空间极值检测</h2><p>SIFT算法是在不同的尺度空间上查找关键点，尺度空间的获取需要使用高斯模糊。</p><h3 id="2-1-高斯模糊">2.1 高斯模糊</h3><h4 id="（1）高斯函数">（1）高斯函数</h4><p>高斯模糊使用高斯函数（正态分布）计算模糊模板，并使用该模板与原图像做卷积运算，以此模糊图像。</p><p>N维空间的高斯计算公示：</p><p><img src="https://img.mahaofei.com/img/202112232022082-sift-theory-1.png" alt=""></p><blockquote><ul><li>$\sigma$为正态分布的标准差，$\sigma$越大图像越模糊、越平滑</li><li>$r$为模糊半径，指模板元素到模板中心的距离</li></ul></blockquote><p>二维空间的高斯计算公式：</p><p><img src="https://img.mahaofei.com/img/202112232022463-sift-theory-2.png" alt=""></p><blockquote><ul><li>$\sigma$为正态分布的标准差，$\sigma$越大图像越模糊、越平滑</li><li>m,n为二维模板的大小m*n</li><li>x,y为模板上元素的位置(x,y)</li></ul></blockquote><p>二维高斯函数生成的曲面是从中心开始的正态分布同心圆。每个像素的值都是周围相邻像素的加权平均。原始像素具有最大的权重，边缘像素权重越来越小，因此更高的保留了边缘效果。</p><p>在计算每个像素的离散近似时，$3\sigma$之外的像素都可以视为不起作用，因此图像处理程序只需要计算 $(6\sigma+1)\times(6\sigma+1) $的矩阵就可以了。</p><h4 id="（2）二维高斯模糊">（2）二维高斯模糊</h4><p>根据$\sigma$计算出高斯模板矩阵（大小为$(6\sigma+1)\times(6\sigma+1) $，值根据$G(x,y)$计算）</p><p>对高斯模板矩阵进行归一化处理（确保矩阵元素在$[0,1]$范围内），例如$5\times5$的高斯模板如下图，可以看出高斯模板是中心对称的。</p><p><img src="https://img.mahaofei.com/img/202112232023230-sift-theory-3.png" alt=""></p><p>利用此高斯模板矩阵与原图像做卷积，即可获得原图像的高斯模糊图像。卷积过程示意图如下：</p><p><img src="https://img.mahaofei.com/img/202112232023732-sift-theory-4.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232024140-sift-theory-5.png" alt=""></p><h4 id="（3）分离高斯模糊">（3）分离高斯模糊</h4><p>二维高斯模糊有两个不足之处：</p><ol><li>使用二维高斯模糊会造成边缘图像缺失，$\sigma$越大，缺失像素越多</li><li>模板变大时，高斯核的卷据运算量会大幅度提高</li></ol><p>解决方法：</p><p>利用高斯函数的可分离性（二维矩阵的变换效果等效于水平方向一维高斯矩阵变换加竖直方向一维高斯矩阵变换）。</p><ol><li>两次一维的高斯卷积将消除二维高斯矩阵所产生的边缘。</li><li>卷积运算只需要O(n×M×N)+O(m×M×N)次计算，而二维矩阵需要O(m×n×M×N)次计算。其中m,n为高斯矩阵的维数。M,N为二维图像的维数。</li></ol><p><img src="https://img.mahaofei.com/img/202112232024414-sift-theory-6.png" alt=""></p><h3 id="2-2-尺度空间">2.2 尺度空间</h3><h4 id="（1）尺度空间的概念">（1）尺度空间的概念</h4><ol><li><p><strong>概念</strong></p><p>在图像信息处理模型中引入一个被视为尺度的参数，通过连续变化尺度参数获得多尺度下的尺度空间表示序列，对这些序列进行尺度空间主轮廓的提取，并以该主轮廓作为特征向量，实现边缘、角点检测和不同分辨率的特征提取。</p></li><li><p><strong>特点</strong></p><p>将传统的但尺度图像信息处理技术纳入尺度不断变化的动态分析框架中。更容易获取图像的本质特征。尺度空间中各尺度图像的模糊程度逐渐变大，能够模拟人在距离目标由近到远时目标在视网膜上的形成过程。</p></li><li><p><strong>优点</strong></p><p>1）尺度空间算子对图像的分析不受图像的灰度水平和对比度变化的影响，即满足灰度不变性和对比度不变性；</p><p>2）尺度空间算子对图像的分析和图像的位置、大小、角度以及仿射变换无关，即满足平移不变性、尺度不变性、欧几里德不变性以及仿射不变性。</p></li></ol><h4 id="（2）尺度空间的表示">（2）尺度空间的表示</h4><p>尺度空间 $L(x,y,z)$ 定义为变化尺度的高斯函数 $G(x,y,\sigma)$ 与原图像 $I(x,y)$ 的卷积。</p><p><img src="https://img.mahaofei.com/img/202112232025921-sift-theory-7.png" alt=""></p><p>其中$\sigma$为尺度因子，$\sigma$越小对应模糊程度越小，相应的尺度约小。因此大尺度对应图像的概貌特征，小尺度对应图像的细节特征。</p><p><img src="https://img.mahaofei.com/img/202112232025197-sift-theory-8.png" alt=""></p><h4 id="（3）高斯金字塔的构建方法">（3）高斯金字塔的构建方法</h4><p>尺度空间在实现时使用高斯金字塔表示，高斯金字塔构建分为两步：1）对图像做降采样；2）对图像做高斯平滑。</p><p>金字塔模型是指将原始图像不断进行降采样，得到一系列大小不同的图像，由大到小，由下到上。原图像为金字塔的第一层，每次降采样所得到的新图像为金字塔的一层。为了让尺度体现其连续性，高斯金字塔在简单降采样的基础上加上了高斯滤波。</p><p>如上图所示，将图像金字塔每层的一张图像使用不同参数做高斯模糊，Octave表示一幅图像可产生的图像组数，Interval表示一组图像包括的图像层数。另外，降采样时，高斯金字塔上一组图像的初始图像(底层图像)是由前一组图像的倒数第三张图像隔点采样得到的。</p><p>高斯金字塔的层数计算：</p><p><img src="https://img.mahaofei.com/img/202112232025038-sift-theory-9.png" alt=""></p><blockquote><p>M,N：原图像大小<br>t：塔顶图像的最小维度的对数值</p></blockquote><p><img src="https://img.mahaofei.com/img/202112232026124-sift-theory-10.png" alt=""></p><h3 id="2-4-极值检测方法">2.4 极值检测方法</h3><p>由于要在尺度空间中寻找图像的极值点，因此在实际计算中，使用高斯金字塔每组中相邻上下两层图像相减，得到高斯差分图像（Difference of Gaussian ，简称DOG），进行极值检测。即两个相邻尺度的差（这里用常数k区分相邻的尺度）：</p><p>$D(x, y, σ) = (G(x, y, kσ)−G(x, y, σ))∗I(x, y)$</p><p>​$=L(x, y, kσ)−L(x, y, σ)$</p><p>为了寻找高斯差分函数函数的极值点，每一个像素点要和它所有的相邻点比较，看其是否比它的图像域和尺度域的相邻点大或者小。如图所示，中间的检测点和它同尺度的8个相邻点和上下相邻尺度对应的9×2个点共26个点比较，以确保在尺度空间和二维图像空间都检测到极值点。</p><p><img src="https://img.mahaofei.com/img/202112232026929-sift-theory-11.png" alt=""></p><p>由于要在相邻尺度进行比较，由于高斯差分金字塔的每一组图像，只能在中间的层进行极值点检测，最上和最下层无法进行。</p><p>为了在每组中检测S个尺度的极值点，则DOG金字塔每组需S+2层图像，而DOG金字塔由高斯金字塔相邻两层相减得到，则高斯金字塔每组需S+3层图像，实际计算时S在3到5之间。</p><h3 id="2-5-极值检测的采样频率">2.5 极值检测的采样频率</h3><p>检测局部极大值和极小值，在采样点同层的8个邻域点和上下相邻层的各9个邻域点之中选择，只有大于或这些所有的邻域点才能称为极值。经过检测后绝大多数的采样点都被剔除了。</p><p>其中重要问题就是确定图像和尺度的采样频率，以可靠的检测极值，但事实上极值点可以非常接近，因此需要找到一种平衡效率和完整性的解决方案。</p><h4 id="（1）尺度域的采样频率">（1）尺度域的采样频率</h4><p>经过大量实验数据得到：</p><p>（1）当采样更多尺度时，可重复性没有继续提高，因为这会导致更多的局部极值被检测到，但这些极值平均来说不太稳定，不太可能在被转换后的图像中检测到。</p><p>（2）当采样规模增大时，关键点的数量增加，正确匹配的总数量增加，由于实际使用时物体识别的成功更多取决于正确匹配关键点的数量，而不是正确匹配的百分比，因此使用大量的样本是最好的。但是这会导致计算成本的增加，所以Lowe建议<strong>每组使用3个尺度样本</strong></p><h4 id="（2）空间域的采样频率">（2）空间域的采样频率</h4><p>需要确定在一个尺度内图像域的采样频率，假设极值点可以任意靠近，那么在空间域的采样频率和检测率之间也会有类似的平衡。这里Lowe经过实验，建议选择使用$\sigma=1.6$。</p><p>并且由于在进行极值检测之前进行了差分处理，因此丢弃了最高的空间频率，为了充分利用输入，可以在构建金字塔第一级之前使用线性插值将输入图像的大小增加一倍。</p><h2 id="三、关键点定位">三、关键点定位</h2><h3 id="3-1-关键点的准确定位">3.1 关键点的准确定位</h3><p>离散空间的极值点不是图像真正的极值点。</p><p><img src="https://img.mahaofei.com/img/202112232026016-sift-theory-12.png" alt=""></p><p>为了提高关键点的稳定性，需要对尺度空间函数进行曲线拟合。利用尺度空间函数的Taylor展开式，导数在极值点处为0，求得$x$的偏移量实现对关键点的精确定位。</p><p>将尺度空间函数$D(x,y,\sigma)$进行泰勒展开，使原点与采样点重合。</p><p><img src="https://img.mahaofei.com/img/202112232027590-sift-theory-13.png" alt=""></p><p>对$D(x,y,\sigma)$求导并令其等于零，求得$\hat{x}=−\frac{∂^2D^{-1}}{∂x^2}\frac{∂D}{∂x}$即为$x$的偏移量。</p><h3 id="3-1-消除边缘响应">3.1 消除边缘响应</h3><p>为了稳定，仅去除低对比度的关键点是不够的，还需要消除高斯差分函数带来的边缘响应。在边缘梯度方向的主曲率较大，垂直方向（沿边缘方向）的主曲率较小。主曲率可以通过Hessian矩阵计算：</p><p><img src="https://img.mahaofei.com/img/202112232027721-sift-theory-14.png" alt=""></p><p>其特征值正比于D的主曲率，由于我们只需要特征值的比值$r$，因此可以避免求出特征值的结果。设$\alpha$为较大的特征值，$\beta$为较小的特征值，取$\alpha=r\beta$，利用迹和行列式的特点：</p><p><img src="https://img.mahaofei.com/img/202112232028879-sift-theory-15.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232028531-sift-theory-16.png" alt=""></p><p>因此当两特征值相等时，上式$\frac{Tr(H)^2}{Det(H)}=\frac{(r+1)^2}{r}$有最小值，并且该式随着比值$r$增大而增大，因此要检验主曲率是否在某个阈值以下，只需要检验</p><p>$\frac{Tr(H)^2}{Det(H)}&lt;\frac{(r+1)^2}{r}$。当满足条件时保留特征点，否则剔除。（常用T=1.2）</p><h2 id="四、梯度方向分配">四、梯度方向分配</h2><h3 id="4-1-梯度大小方向求解">4.1 梯度大小方向求解</h3><p>为了使关键点描述子具有旋转不变性，利用图像的局部特征给每一个关键点分配一个基准方向，使描述子对图像旋转具有不变性。对于在高斯差分金字塔中检测出的关键点，采集其所在高斯金字塔图像$3\sigma$邻域窗口的像素的梯度和方向分布特征。梯度的模和方向如下：</p><p><img src="https://img.mahaofei.com/img/202112232029555-sift-theory-17.png" alt=""></p><h3 id="4-2-梯度统计">4.2 梯度统计</h3><p>完成关键点的梯度计算后，使用直方图统计邻域内像素的梯度和方向。梯度直方图将0~360°方向分为36份，每个柱子代表10°范围，如图直方图的峰值代表关键点的主方向。</p><p><img src="https://img.mahaofei.com/img/202112232029678-sift-theory-18.png" alt=""></p><p>以直方图中最大值作为该关键点的主方向，为了增强匹配的鲁棒性，只保留峰值大于主方向峰值80％的方向作为该关键点的辅方向。</p><h2 id="五、关键点描述子">五、关键点描述子</h2><p>经过上面的步骤，每一个关键点都拥有位置、尺度、方向三个信息。</p><p>下一步是为每个关键点建立一个描述符，用一组向量将这个关键点描述出来，使其不随各种变化而改变，使其不随光照、视角等变化而变化。</p><h3 id="5-1-描述符表示">5.1 描述符表示</h3><h4 id="（1）特征向量表示">（1）特征向量表示</h4><p>首先在关键点周围采样图像的梯度大小和方向，利用关键点的尺度选择图像的高斯模糊程度。为了实现方向不变性，描述子的坐标和梯度方向是相对于关键点方向旋转的。</p><p><img src="https://img.mahaofei.com/img/202112232029018-sift-theory-19.png" alt=""></p><p>使用一个$\sigma$等于子窗口宽度的一半的高斯加权函数来为每个采样点的大小赋值。（为了避免随着窗口位置的微小变化导致的描述符的突然变化，同时减少远离描述符中心的梯度影响，这些梯度最容易配准错误）</p><p>描述符由一个包含所有方向直方图条目值的向量构成，Lowe经过实验证明最好的选择是：每个关键点划分4个领域，对应4个描述子，每个描述子使用4x4的方向直方图阵列，每个直方图中有8个梯度方向，因此每个关键点采用4x4x8=128个特征向量。</p><h4 id="（2）归一化处理">（2）归一化处理</h4><p>对特征向量进行修正，减小光照变化对特征向量的影响。</p><ol><li>对比度影响消除</li></ol><blockquote><p>因为图像对比度的变化即每个像素值乘以一个常数，因此归一化会消除对比度的影响。</p></blockquote><p>因此首先将向量归一化为单位长度。</p><ol start="2"><li>照明条件影响消除</li></ol><blockquote><p>图像亮度是每个图像像素加上一个常数，因此亮度变化不会影响图像的梯度，所以描述符对于光照的仿射变化是不变的。（在不考虑非线性光照的情况下）</p></blockquote><p>考虑照明条件变化，可以通过将单位特征向量阈值划为不大于0.2（Lowe实验测得），减少较大梯度的影响，然后重新归一化。此时匹配大梯度不再重要，方向的分布更加重要。</p><h2 id="六、物体识别的应用">六、物体识别的应用</h2><p>目标识别首先通过将每个关键点独立地与从训练图像中提取出的关键点数据库进行匹配来完成。由于模糊的特征和背景影响，一开始匹配肯定是不准确的。所以需要至少有三个特征的聚类首先被识别出来，这些聚类与对象姿态一致，其正确性就比单个特征匹配要高得多。然后对每个聚类进行几何拟合检查，根据拟合结果接受或拒绝。</p><ol><li>从训练图像中识别关键点数据库中的最近邻，找到每个关键点的最佳候选匹配。（最近邻可以使用最小欧式距离）</li><li>如果图像特征在数据库中没有任何正确的匹配，则丢弃。</li><li>如果有多个匹配结果，则定义第二个最近邻为已知来自不同物体。在相似距离内可能会有许多其他错误匹配。我们可以将次近匹配视为在特征空间的这一部分内提供错误匹配密度的估计。</li></ol><h2 id="七、总结">七、总结</h2><p>SIFT特征具有稳定性和不变性，在图像处理和计算机视觉领域有着很重要的作用。</p><p><strong>SIFT算法的主要实现过程</strong></p><ol><li><p><strong>尺度空间极值检测</strong></p></li><li><p><strong>关键点定位</strong></p></li><li><p><strong>方向分配</strong></p></li><li><p><strong>关键点描述和匹配</strong></p></li></ol>]]></content>
    
    
    <summary type="html">SIFT是尺度不变特征转换，是一种用来检测和描述图像局部特征的算法。算法实际上是要在不同尺度空间中寻找极值点，并提取其位置、尺度和旋转不变量，这些关键点不会因光照、仿射变换和噪音而变化。主要实现步骤：（1）尺度空间极值检测；（2）关键点定位；（3）方向分配；（4）关键点描述和匹配。</summary>
    
    
    
    <category term="机器人" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    <category term="视觉" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/%E8%A7%86%E8%A7%89/"/>
    
    
    <category term="算法" scheme="https://www.mahaofei.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>PyQt5图形界面GUI开发过程记录</title>
    <link href="https://www.mahaofei.com/post/6c1e143c.html"/>
    <id>https://www.mahaofei.com/post/6c1e143c.html</id>
    <published>2021-12-17T08:53:44.000Z</published>
    <updated>2021-12-17T08:53:44.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、PyQT的简介与安装">一、PyQT的简介与安装</h2><h3 id="1-1-常用的图形界面GUI">1.1 常用的图形界面GUI</h3><p>目前主流的python图形界面有Tkinter、PyQT5/PySide2、wxPython等。</p><table><thead><tr><th>图形界面</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>Tkinter</td><td>Python标准库、稳定、发布程序较小</td><td>控件少，无法拖拽设计界面</td></tr><tr><td>PyQt5/PySide2</td><td>控件比较丰富、用户多、有designer设计界面</td><td>库比较大，发布出来的程序比较大</td></tr><tr><td>wxPython</td><td>控件比较丰富</td><td>文档少、用户少</td></tr></tbody></table><h3 id="1-2-PyQT5的安装">1.2 PyQT5的安装</h3><p>直接在命令行使用pip工具安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyqt5-tools</span><br></pre></td></tr></table></figure><p>将PyQt5安装目录下的<code>\plugins\platforms</code>这个路径添加到环境变量Path中。（先找python安装目录<code>Python39</code>或<code>Python38</code>，再找下面的<code>\Lib\site-packages\PyQt5\Qt5</code>）</p><p>如我的路径是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\82785\AppData\Local\Programs\Python\Python39\Lib\site-packages\PyQt5\Qt5\plugins\platforms</span><br></pre></td></tr></table></figure><p><strong>注：设置环境变量后，需要重启电脑，因为新的环境变量要重启后才能被系统识别</strong></p><h2 id="二、PyQt的基本使用">二、PyQt的基本使用</h2><h3 id="2-1-QApplication">2.1 QApplication</h3><p>提供整个图形界面程序的底层管理功能，如初始化、程序入口参数处理、用户事件处理等。</p><ul><li>在创建控件之前，必须先创建QApplication。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = QApplication([])</span><br></pre></td></tr></table></figure><ul><li>在程序末尾，需要添加事件处理循环代码，用于接受输入事件，并分配给相应对象进行处理。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="built_in">exec</span>()</span><br></pre></td></tr></table></figure><h3 id="2-2-界面控件">2.2 界面控件</h3><p>QMainWindow、QPlainTextEdit、QPushButton是三个控件类，分别是界面的主窗口、文本框、按钮。<code>要想在界面上创建一个控件，就需要在程序代码中创建空间对应的类的实例对象</code>。</p><ul><li>控件是层层嵌套的：<br>创建文本框和按钮时，都需要一个参数window，就是指定父控件对象（主窗口）。<br>而实例化主窗口时，不需要指定父控件，因为主窗口就是最上层控件了。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QPlainTextEdit(window)</span><br><span class="line">QPushButton(<span class="string">&#x27;文本框&#x27;</span>, window)</span><br></pre></td></tr></table></figure><ul><li>move方法决定了控件的显示位置</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.move(<span class="number">300</span>, <span class="number">310</span>)<span class="comment"># 主窗口左上角相对屏幕左上角位置</span></span><br><span class="line">textEdit.move(<span class="number">10</span>,<span class="number">25</span>)<span class="comment"># 文本框左上角相对父窗口左上角位置</span></span><br></pre></td></tr></table></figure><ul><li>resize方法决定了控件显示大小</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.resize(<span class="number">600</span>, <span class="number">400</span>)<span class="comment"># 主窗口宽600像素，高400像素</span></span><br><span class="line">textEdit.resize(<span class="number">200</span>,<span class="number">150</span>)<span class="comment"># 文本框宽200像素，高150像素</span></span><br></pre></td></tr></table></figure><ul><li>show方法将所有放在主窗口的控件显示出来</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.show()</span><br></pre></td></tr></table></figure><h3 id="2-3-界面动作处理">2.3 界面动作处理</h3><p>在Qt系统中，当控件被点击、输入文本、拖拽等操作时，会发出信号Signal。</p><p>要想使程序对这些操作进行响应，就要预先在代码中指定处理signal的函数，这样的函数称为slot。</p><p>如定义一个函数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">buttonPress</span>()：</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;按钮被按下了&#x27;</span>)</span><br></pre></td></tr></table></figure><p>然后使用如下代码，让button被按下时，执行buttonPress()函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.clicked.connect(buttonPress)</span><br></pre></td></tr></table></figure><h3 id="2-4-窗口封装为类">2.4 窗口封装为类</h3><p>为了模块化、便于使用，以及避免控件中出现的变量名冲突，通常会把<strong>一个窗口和其包含的控件封装到类中</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PySide2.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow, QPushButton,  QPlainTextEdit,QMessageBox</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWindows</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.window = QMainWindow()</span><br><span class="line">        self.window.resize(<span class="number">500</span>, <span class="number">400</span>)</span><br><span class="line">        self.window.move(<span class="number">300</span>, <span class="number">300</span>)</span><br><span class="line">        self.window.setWindowTitle(<span class="string">&#x27;示例程序&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        self.textEdit = QPlainTextEdit(self.window)</span><br><span class="line">        self.textEdit.setPlaceholderText(<span class="string">&quot;文本框提示语&quot;</span>)</span><br><span class="line">        self.textEdit.move(<span class="number">10</span>, <span class="number">25</span>)</span><br><span class="line">        self.textEdit.resize(<span class="number">300</span>, <span class="number">350</span>)</span><br><span class="line"></span><br><span class="line">        self.button = QPushButton(<span class="string">&#x27;统计&#x27;</span>, self.window)</span><br><span class="line">        self.button.move(<span class="number">380</span>, <span class="number">80</span>)</span><br><span class="line"></span><br><span class="line">        self.button.clicked.connect(self.handleCalc)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handleCalc</span>(<span class="params">self</span>):</span><br><span class="line">        text = self.textEdit.toPlainText()</span><br><span class="line">        <span class="comment"># 处理程序</span></span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">mywindow = MyWindows()</span><br><span class="line">mywindow .window.show()</span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure><h2 id="三、界面设计Qt-Designer">三、界面设计Qt Designer</h2><h3 id="3-1-Qt-Designer的简单介绍">3.1 Qt Designer的简单介绍</h3><p>Qt Designer是一个QT界面生成器，避免了像Tkinter需要将想象的图形界面用代码一行一行写出来。Qt Designer是一种图形化界面设计工具，通过拖拽控件，就可以实现界面布局的设计。</p><p>在python安装目录下的<code>Lib\site-packages\qt5_applications\Qt\bin\designer.exe</code>，这个可执行文件就是Qt Designer程序。</p><p><img src="https://img.mahaofei.com/img/202112232018944-pyqt5-1.png" alt=""></p><p>打开Qt Designer后，界面左侧是控件列表，右侧是对象查看器和属性编辑器。</p><p><img src="https://img.mahaofei.com/img/202112232018814-pyqt5-2.png" alt=""></p><p>创建窗体后，可以直接将左侧的控件，如文本框、按钮等拖入到窗体中，手动调整其大小和位置。在右侧可以修改每个空间的属性。</p><p>创建好图形界面后，点击视图-预览可以查看界面效果，点击保存按钮，即可将图形界面保存为<code>.ui</code>的文件，需要修改界面时可以直接再打开<code>.ui</code>就可以修改界面。</p><h3 id="3-2-布局">3.2 布局</h3><p>简单的控件拖拽布局就不介绍了，这里说一下布局方式。</p><p>常用的布局方式有</p><table><thead><tr><th>布局</th><th>样式</th></tr></thead><tbody><tr><td>水平布局</td><td><img src="https://img.mahaofei.com/img/202112232019148-pyqt5-3.png" alt=""></td></tr><tr><td>垂直布局</td><td><img src="https://img.mahaofei.com/img/202112232019433-pyqt5-4.png" alt=""></td></tr><tr><td>表格布局</td><td><img src="https://img.mahaofei.com/img/202112232020951-pyqt5-5.png" alt=""></td></tr><tr><td>表单布局</td><td><img src="https://img.mahaofei.com/img/202112232020207-pyqt5-6.png" alt=""></td></tr></tbody></table><p>比如点选几个控件，右键设置为水平布局。这样几个空间就组合成了一个大的整体的“控件”。</p><p>再将几个设置好的水平布局选中，右键设置为垂直布局，这样就算是非常快速地制作好了一个非常简单的UI。</p><p><img src="https://img.mahaofei.com/img/202112232021341-pyqt5-7.png" alt=""></p><h3 id="3-3-控件调整">3.3 控件调整</h3><p><strong>（1）控件大小</strong></p><p>主要使用的是<code>sizePolicy</code>这个属性。</p><p>水平策略和垂直策略：</p><p><img src="https://img.mahaofei.com/img/202112232021554-pyqt5-8.png" alt=""></p><p>水平伸缩和垂直伸缩：描述多个部件在水平方向的大小比例，类似于权重。</p><blockquote><p>如两个在同一水平位置的部件的水平伸缩因子分别为1和2，则二者宽带的大小比例为1:2，如果该水平方向再无其他控件，则二者各占布局管理器宽度的1/3和2/3。</p></blockquote><p><strong>（2）控件间距</strong></p><p>上下间距：给控件添加<code>layout</code>属性，通过调整上下的padding和margin来调整间距。</p><p>左右间距：给控件添加<code>layout</code>调整左右的padding和margin来调整间距，或添加<code>horizontal spacer</code>属性调整。</p><h2 id="四、Python程序">四、Python程序</h2><h3 id="4-1-ui文件转换python程序">4.1 ui文件转换python程序</h3><p>使用cmd将目录切换到<code>.ui</code>文件所在目录，使用如下命令生成代码。（请将命令中的name替换成文件名）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyuic5 -o name.py name.ui</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/202112232021448-pyqt5-9.png" alt=""></p><h3 id="4-2-主程序调用ui">4.2 主程序调用ui</h3><p>这时如果尝试运行刚刚生成的python程序是没有用的，因为生成的文件没有程序入口。因此我们需要创建一个主程序用来调用ui程序。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入程序运行必须模块</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># PyQt5中使用的基本控件都在PyQt5.QtWidgets模块中</span></span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow, QFileDialog</span><br><span class="line"><span class="comment"># 导入designer工具生成的模块</span></span><br><span class="line"><span class="comment"># 注意导入时filename替换成生成的.py文件名，Ui_file替换成.py文件的类名</span></span><br><span class="line"><span class="keyword">from</span> filename <span class="keyword">import</span> Ui_filename</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyMainForm</span>(QMainWindow, Ui_excel_combine):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, parent=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MyMainForm, self).__init__(parent)</span><br><span class="line">        self.setupUi(self)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 固定的，PyQt5程序都需要QApplication对象。sys.argv是命令行参数列表，确保程序可以双击运行</span></span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    myWin = MyMainForm()</span><br><span class="line">    <span class="comment"># 将窗口控件显示在屏幕上</span></span><br><span class="line">    myWin.show()</span><br><span class="line">    <span class="comment"># 程序运行，sys.exit方法确保程序完整退出。</span></span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="4-3-设置按钮、文本框的响应程序">4.3 设置按钮、文本框的响应程序</h3><p>在主程序的MyMainForm类中进行设置，以按钮和文本框为例</p><p><strong>（1）按钮按下处理程序</strong></p><p>例如下面的代码，当按钮被按下时，自动执行括号内的处理函数<code>button_clicked_handle</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buttonname.clicked.connect(button_clicked_handle)</span><br></pre></td></tr></table></figure><p><strong>（2）文本框显示处理程序</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textBrowser.setPlainText(<span class="string">&#x27;显示的字符串&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="4-4-示例代码">4.4 示例代码</h3><p>我写的代码是合并多个excel数据的程序，其中的GUI部分代码如下：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入程序运行必须模块</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># PyQt5中使用的基本控件都在PyQt5.QtWidgets模块中</span></span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow, QFileDialog</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QIcon</span><br><span class="line"><span class="comment"># 导入designer工具生成的模块</span></span><br><span class="line"><span class="keyword">from</span> excel_combine_ui <span class="keyword">import</span> Ui_excel_combine</span><br><span class="line"></span><br><span class="line">dir_choose = <span class="string">&quot;&quot;</span></span><br><span class="line">filename = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyMainForm</span>(QMainWindow, Ui_excel_combine):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, parent=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(MyMainForm, self).__init__(parent)</span><br><span class="line">        self.setupUi(self)</span><br><span class="line">        self.cwd = os.getcwd() <span class="comment"># 获取当前程序文件位置</span></span><br><span class="line">        self.sourceButton.clicked.connect(self.slot_source_button)</span><br><span class="line">        self.targetButton.clicked.connect(self.slot_target_button)</span><br><span class="line">        self.combineButton.clicked.connect(self.slot_combine_button)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">slot_source_button</span>(<span class="params">self</span>):</span><br><span class="line">        files, filetype = QFileDialog.getOpenFileNames(self, <span class="string">&quot;选择多个采购申请表&quot;</span>, self.cwd, <span class="string">&quot;All Files (*);;PDF Files (*.pdf);;Text Files (*.txt)&quot;</span>)</span><br><span class="line">        <span class="keyword">global</span> filename</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(files) == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;取消选择\n&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        filename_print = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            filename.append(file)</span><br><span class="line">            filename_print += file</span><br><span class="line">            filename_print += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        self.textBrowser.setPlainText(filename_print)</span><br><span class="line">        <span class="comment"># print(&quot;文件筛选器类型：&quot;, filetype)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">slot_target_button</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">global</span> dir_choose</span><br><span class="line">        dir_choose = QFileDialog.getExistingDirectory(self, <span class="string">&quot;选择保存目录&quot;</span>, self.cwd)</span><br><span class="line">        <span class="keyword">if</span> dir_choose == <span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;取消选择\n&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.textBrowser_2.setPlainText(dir_choose)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">slot_combine_button</span>(<span class="params">self</span>):</span><br><span class="line">        wb_template = app.books.<span class="built_in">open</span>(<span class="string">&#x27;采购申请单模板.xls&#x27;</span>)  <span class="comment"># 打开工作簿</span></span><br><span class="line">        combine(wb_template, filename, dir_choose+<span class="string">&#x27;\采购申请表汇总.xls&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 固定的，PyQt5程序都需要QApplication对象。sys.argv是命令行参数列表，确保程序可以双击运行</span></span><br><span class="line">    app1 = QApplication(sys.argv)</span><br><span class="line">    app1.setWindowIcon(QIcon(<span class="string">&#x27;logo.png&#x27;</span>))</span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    myWin = MyMainForm()</span><br><span class="line">    <span class="comment"># 将窗口控件显示在屏幕上</span></span><br><span class="line">    myWin.show()</span><br><span class="line">    <span class="comment"># 程序运行，sys.exit方法确保程序完整退出。</span></span><br><span class="line"></span><br><span class="line">    sys.exit(app1.exec_())</span><br><span class="line">    <span class="comment"># button.clicked.connect(handleCalc) 按钮按下</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/202112232022811-pyqt5-10.png" alt=""></p><blockquote><p>更多控件的使用方法可以参考这位博主的文章：<br>链接：<a href="https://blog.csdn.net/weixin_40841247/article/details/88781601">https://blog.csdn.net/weixin_40841247/article/details/88781601</a></p></blockquote><h2 id="五、发布程序">五、发布程序</h2><h3 id="5-1-安装pyinstaller">5.1 安装pyinstaller</h3><p>要将写好的python程序打包成exe可执行程序需要使用pyinstaller，使用pip命令安装pyInstaller：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller</span><br></pre></td></tr></table></figure><h3 id="5-2-打包exe">5.2 打包exe</h3><ol><li><p>打开cmd窗口，进入写好的python程序所在的目录</p></li><li><p>使用如下的命令打包exe，例如我的主程序是<code>main.py</code>，我用到的包有<code>PyQt5</code>和<code>xlwings</code>，我的图标文件是<code>logo.ico</code></p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller main.py --noconsole --hidden-import <span class="string">&quot;PyQt5.QtXml&quot;</span>,<span class="string">&quot;xlwings&quot;</span> --icon=<span class="string">&quot;logo.ico&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/202112232022909-pyqt5-11.png" alt=""></p><p>由于pyInstaller只能分析出需要哪些代码文件。 而程序动态打开的资源文件，比如图片、excel、ui这些，它是不会帮你打包的。</p><p>而我的程序需要从调用xls表格文件，手动拷贝到dist/main目录中。</p><p>然后，再双击运行 main.exe，即可成功。</p><h3 id="5-3-改进：减少打包程序的大小">5.3 改进：减少打包程序的大小</h3><p>刚刚使用命令行直接打包，发现打包出来的程序非常大。原因是打包时系统会将很多原本用不到的依赖库一并打包起来。经过在网上查找方法，发现可以使用虚拟环境，原理是新建一个虚拟环境，然后在虚拟环境中安装程序的依赖库，然后在虚拟环境中完成打包。</p><p><strong>（1）使用pipenv创建虚拟环境</strong></p><p>创建python虚拟环境，需要系统已经安装好python虚拟环境。打开cmd。</p><ol><li>安装pipenv</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipenv</span><br></pre></td></tr></table></figure><ol start="2"><li>进入一个空目录，初始化虚拟python环境（注意python版本需要与系统安装的版本一致）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv --python 3.9</span><br></pre></td></tr></table></figure><ol start="3"><li>进入虚拟环境</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv shell</span><br></pre></td></tr></table></figure><p><strong>（2）安装程序依赖</strong></p><p>在虚拟环境中，只安装python程序使用到的库，尽可能减少打包程序的大小</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller</span><br><span class="line">pip install pyqt5</span><br><span class="line">pip install xlwings</span><br></pre></td></tr></table></figure><p><strong>（3）虚拟环境中打包程序</strong></p><p>在虚拟环境中直接使用pyinstaller打包程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller main.py --noconsole --hidden-import <span class="string">&quot;PyQt5.QtXml&quot;</span>,<span class="string">&quot;xlwings&quot;</span> --icon=<span class="string">&quot;logo.ico&quot;</span></span><br></pre></td></tr></table></figure><p>这样打包完成后的程序就小了很多。</p>]]></content>
    
    
    <summary type="html">由于最近实验室需要处理很多表格，因此使用python做了一个工具辅助处理。程序使用pyqt5作为图形界面，记录了从安装pyqt5，到设计界面，再到调用控件的代码，最后打包exe文件的全过程。</summary>
    
    
    
    <category term="程序设计" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Python/"/>
    
    
    <category term="实验" scheme="https://www.mahaofei.com/tags/%E5%AE%9E%E9%AA%8C/"/>
    
    <category term="Python" scheme="https://www.mahaofei.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>g2o图优化简介与基本使用方法</title>
    <link href="https://www.mahaofei.com/post/7851485c.html"/>
    <id>https://www.mahaofei.com/post/7851485c.html</id>
    <published>2021-10-24T03:03:18.000Z</published>
    <updated>2021-10-24T03:03:18.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、g2o简介">一、g2o简介</h3><p>g2o（General Graphic Optimization）是一个基于图优化的库，将非线性优化与图论结合起来的理论，我们可以利用g2o求解任何可以表示为图优化的最小二乘问题。</p><blockquote><p>图优化就是把优化问题表现成图的方式。图由顶点和边组成，其中顶点表示优化变量，边表示误差项，对任意一个非线性?&gt; 最小二乘问题，我们都可以构建与之对应的图。<br>（注：这里的图是图论意义上的图，可以用概率论里面的定义，贝叶斯图或因子图。）</p></blockquote><h3 id="二、g2o安装">二、g2o安装</h3><p>首先安装g2o的依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install qt5-qmake qt5-default libqglviewer-dev-qt5 libsuitesparse-dev libcxsparse3 libcholmod3 </span><br></pre></td></tr></table></figure><p>然后到github下clone此工程，然后编译安装，指令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/RainerKuemmerle/g2o.git</span><br><span class="line"><span class="built_in">cd</span> g2o/</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ../</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p>g2o的头文件在<code>/usr/local/g2o</code>下，库文件在<code>/usr.local/lib</code>下。</p><h3 id="三、利用g2o拟合曲线">三、利用g2o拟合曲线</h3><h4 id="1-拟合步骤">1. 拟合步骤</h4><p><strong>① 定义顶点和边的类型（优化变量与误差项）</strong><br><strong>② 构建图</strong><br><strong>③ 选择优化算法</strong><br><strong>④ 调用g2o进行优化，返回结果</strong></p><h3 id="2-实验-拟合曲线">2. 实验-拟合曲线</h3><p>此示例程序还依赖opencv、Eigen、Ceres库，需要预先安装。</p><p><strong>main.cpp文件</strong>：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/g2o_core_api.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/base_vertex.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/base_unary_edge.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/block_solver.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/optimization_algorithm_levenberg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/optimization_algorithm_gauss_newton.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/core/optimization_algorithm_dogleg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;g2o/solvers/dense/linear_solver_dense.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Eigen/Core&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 曲线模型的顶点（优化变量）（参数：维度、数据类型）</span></span><br><span class="line"><span class="comment">// 优化变量维数：3维    数据类型：Eigen::Vector3d</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CurveFittingVertex</span> : <span class="keyword">public</span> g2o::BaseVertex&lt;<span class="number">3</span>, Eigen::Vector3d&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW     <span class="comment">// 字节对齐</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重置</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setToOriginImpl</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        _estimate &lt;&lt; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>;           <span class="comment">// 设定被优化变量的原始值、重置成员函数的估计值</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">oplusImpl</span><span class="params">(<span class="type">const</span> <span class="type">double</span> *update)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        _estimate += Eigen::<span class="built_in">Vector3d</span>(update);           <span class="comment">// 更新优化变量（估计值）。增量方程计算出增量△x后，通过此函数对估计值进行调整</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读盘</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//存盘</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="type">const</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 曲线模型的边（误差项）（参数：观测值维度、类型、连接定点类型）</span></span><br><span class="line"><span class="comment">// 边的模型：BaseUnaryEdge   连接顶点个数：1    测量值数据类型：double  顶点类型：CurveFittingVertex</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CurveFittingEdge</span> : <span class="keyword">public</span> g2o::BaseUnaryEdge&lt;<span class="number">1</span>, <span class="type">double</span>, CurveFittingVertex&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">EIGEN_MAKE_ALIGNED_OPERATOR_NEW</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">CurveFittingEdge</span><span class="params">(<span class="type">double</span> x)</span>:BaseUnaryEdge(),_x(x) &#123;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算曲线模型误差</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">computeError</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="type">const</span> CurveFittingVertex *v = <span class="built_in">static_cast</span>&lt;<span class="type">const</span> CurveFittingVertex *&gt; (_vertices[<span class="number">0</span>]);        <span class="comment">// _vertices[]存储顶点信息</span></span><br><span class="line">        <span class="type">const</span> Eigen::Vector3d abc = v-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        _error(<span class="number">0</span>, <span class="number">0</span>) = _measurement - std::<span class="built_in">exp</span>(<span class="built_in">abc</span>(<span class="number">0</span>, <span class="number">0</span>) * _x * _x + <span class="built_in">abc</span>(<span class="number">1</span>,<span class="number">0</span>) * _x + <span class="built_in">abc</span>(<span class="number">2</span>, <span class="number">0</span>));        <span class="comment">// _error存储computeError()函数计算的误差</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算雅克比矩阵</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">linearizeOplus</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="type">const</span> CurveFittingVertex *v = <span class="built_in">static_cast</span>&lt;<span class="type">const</span> CurveFittingVertex *&gt; (_vertices[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">const</span> Eigen::Vector3d abc = v-&gt;<span class="built_in">estimate</span>();</span><br><span class="line">        <span class="type">double</span> y = <span class="built_in">exp</span>(abc[<span class="number">0</span>] * _x * _x + abc[<span class="number">1</span>] * _x + abc[<span class="number">2</span>]);</span><br><span class="line">        _jacobianOplusXi[<span class="number">0</span>] = -_x * _x * y;</span><br><span class="line">        _jacobianOplusXi[<span class="number">1</span>] = -_x * y;</span><br><span class="line">        _jacobianOplusXi[<span class="number">2</span>] = -y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">read</span><span class="params">(istream &amp;in)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">write</span><span class="params">(ostream &amp;out)</span> <span class="type">const</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">double</span> _x;    <span class="comment">//x值；（y值为_measurement测量值）</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义数据参数</span></span><br><span class="line">    <span class="type">double</span> ar = <span class="number">1.0</span>, br = <span class="number">2.0</span>, cr = <span class="number">1.0</span>;    <span class="comment">//真实参数值</span></span><br><span class="line">    <span class="type">double</span> ae = <span class="number">2.0</span>, be = <span class="number">-1.0</span>, ce = <span class="number">5.0</span>;   <span class="comment">//估计参数值</span></span><br><span class="line">    <span class="type">int</span> N = <span class="number">100</span>;                            <span class="comment">//数据点个数</span></span><br><span class="line">    <span class="type">double</span> w_sigma = <span class="number">1.0</span>;                   <span class="comment">//噪声Sigma值</span></span><br><span class="line">    <span class="type">double</span> inv_sigma = <span class="number">1.0</span> / w_sigma;</span><br><span class="line">    cv::RNG rng;                            <span class="comment">//随机数产生器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成100个带高斯噪声的数据</span></span><br><span class="line">    vector&lt;<span class="type">double</span>&gt; x_data, y_data;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="type">double</span> x = i / <span class="number">100.0</span>;</span><br><span class="line">        x_data.<span class="built_in">push_back</span>(x);</span><br><span class="line">        y_data.<span class="built_in">push_back</span>(<span class="built_in">exp</span>(ar * x * x + br * x + cr) + rng.<span class="built_in">gaussian</span>(w_sigma * w_sigma));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构建图优化</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::BlockSolver&lt;g2o::BlockSolverTraits&lt;<span class="number">3</span>, <span class="number">1</span>&gt;&gt; BlockSolverType;    <span class="comment">// 配置BlockSolver，每个误差项优化变量维度为3，误差值维度为1</span></span><br><span class="line">    <span class="keyword">typedef</span> g2o::LinearSolverDense&lt;BlockSolverType::PoseMatrixType&gt; LinearSolverType;    <span class="comment">// 创建BlockSolver，并用定义的线性求解器初始化</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置梯度下降的方法，创建总求解器solver</span></span><br><span class="line">    <span class="keyword">auto</span> solver = <span class="keyword">new</span> g2o::<span class="built_in">OptimizationAlgorithmGaussNewton</span>(g2o::<span class="built_in">make_unique</span>&lt;BlockSolverType&gt;(g2o::<span class="built_in">make_unique</span>&lt;LinearSolverType&gt;()));</span><br><span class="line">    g2o::SparseOptimizer optimizer;     <span class="comment">//创建系数优化器</span></span><br><span class="line">    optimizer.<span class="built_in">setAlgorithm</span>(solver);     <span class="comment">//设置求解方法</span></span><br><span class="line">    optimizer.<span class="built_in">setVerbose</span>(<span class="literal">true</span>); <span class="comment">//打开调试输出</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图中加入顶点</span></span><br><span class="line">    CurveFittingVertex *v = <span class="keyword">new</span> <span class="built_in">CurveFittingVertex</span>();</span><br><span class="line">    v-&gt;<span class="built_in">setEstimate</span>(Eigen::<span class="built_in">Vector3d</span>(ae, be, ce));</span><br><span class="line">    v-&gt;<span class="built_in">setId</span>(<span class="number">0</span>);</span><br><span class="line">    optimizer.<span class="built_in">addVertex</span>(v);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图中加入边</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        CurveFittingEdge *edge = <span class="keyword">new</span> <span class="built_in">CurveFittingEdge</span>(x_data[i]);</span><br><span class="line">        edge-&gt;<span class="built_in">setId</span>(i);                     <span class="comment">//定义边的编号（决定在H矩阵中的位置）</span></span><br><span class="line">        edge-&gt;<span class="built_in">setVertex</span>(<span class="number">0</span>, v);           <span class="comment">//设置连接的顶点</span></span><br><span class="line">        edge-&gt;<span class="built_in">setMeasurement</span>(y_data[i]);    <span class="comment">//设置观测值</span></span><br><span class="line">        edge-&gt;<span class="built_in">setInformation</span>(Eigen::Matrix&lt;<span class="type">double</span>, <span class="number">1</span>, <span class="number">1</span>&gt;::<span class="built_in">Identity</span>() * <span class="number">1</span> / (w_sigma * w_sigma));    <span class="comment">//信息矩阵：协方差矩阵的逆</span></span><br><span class="line">        optimizer.<span class="built_in">addEdge</span>(edge);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行优化</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Start optimization&quot;</span> &lt;&lt; endl;</span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();  <span class="comment">//记录算法执行时间</span></span><br><span class="line">    optimizer.<span class="built_in">initializeOptimization</span>(); <span class="comment">//初始化</span></span><br><span class="line">    optimizer.<span class="built_in">optimize</span>(<span class="number">10</span>);    <span class="comment">//执行10次</span></span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();</span><br><span class="line">    chrono::duration&lt;<span class="type">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="type">double</span>&gt;&gt;(t2 - t1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Solve time cost = &quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot; s.&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Eigen::Vector3d abc_estimate = v-&gt;<span class="built_in">estimate</span>();   <span class="comment">//获取当前值</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;estimated model: &quot;</span> &lt;&lt; abc_estimate.<span class="built_in">transpose</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>CMakeLists.txt文件</strong>：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cmake_minimum_required</span>(VERSION <span class="number">3.20</span>)</span><br><span class="line"><span class="built_in">project</span>(g2oCurveFitting)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"># OpenCV库</span><br><span class="line"><span class="built_in">find_package</span>(OpenCV REQUIRED)</span><br><span class="line"><span class="built_in">include_directories</span>($&#123;OpenCV_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line"># Eigen库</span><br><span class="line"><span class="built_in">include_directories</span>(<span class="string">&quot;/usr/include/eigen3&quot;</span>)</span><br><span class="line"></span><br><span class="line"># Ceres库</span><br><span class="line"><span class="built_in">find_package</span>(Ceres REQUIRED)</span><br><span class="line"><span class="built_in">include_directories</span>($&#123;CERES_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line"># g2o库</span><br><span class="line"><span class="built_in">list</span>( APPEND CMAKE_MODULE_PATH /home/huffie/slam/<span class="number">3</span>rdparty/g2o/cmake_modules ) #刚才clone的项目文件夹</span><br><span class="line"><span class="built_in">set</span>(G2O_ROOT /usr/local/include/g2o)</span><br><span class="line"><span class="built_in">find_package</span>(G2O REQUIRED)</span><br><span class="line"><span class="built_in">include_directories</span>($&#123;G2O_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">add_executable</span>(g2oCurveFitting main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="built_in">target_link_libraries</span>(g2oCurveFitting $&#123;OpenCV_LIBS&#125;)</span><br><span class="line"><span class="built_in">target_link_libraries</span>(g2oCurveFitting  g2o_stuff   g2o_core )</span><br><span class="line"><span class="built_in">target_link_libraries</span>(g2oCurveFitting $&#123;CERES_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">g2o（General Graphic Optimization）是一个基于图优化的库，将非线性优化与图论结合起来的理论，我们可以利用g2o求解任何可以表示为图优化的最小二乘问题。</summary>
    
    
    
    <category term="机器人" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    <category term="SLAM" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/SLAM/"/>
    
    
    <category term="实验" scheme="https://www.mahaofei.com/tags/%E5%AE%9E%E9%AA%8C/"/>
    
    <category term="笔记" scheme="https://www.mahaofei.com/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="slam" scheme="https://www.mahaofei.com/tags/slam/"/>
    
  </entry>
  
  <entry>
    <title>【Ceres基本使用方法】使用Ceres拟合曲线求解最小二乘问题</title>
    <link href="https://www.mahaofei.com/post/1efb54e0.html"/>
    <id>https://www.mahaofei.com/post/1efb54e0.html</id>
    <published>2021-10-23T03:56:10.000Z</published>
    <updated>2021-10-23T03:56:10.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、Ceres简介">一、Ceres简介</h3><p>Ceres是一个最小二乘问题求解库，我们只需要定义待优化的问题，然后交给它计算即可。</p><p><strong>① 基本概念</strong><br>常用的最小二乘问题形式如下：</p><p><img src="https://img.mahaofei.com/img/202112232017086-ceres-introduction-1.png" alt=""></p><ul><li>参数块：$x_1$, … $x_n$等优化变量</li><li>代价函数（残差块/误差项）：$f_i$</li><li>核函数：ρ(·)，目标函数由许多平方项经过核函数求和自称</li></ul><p><strong>② 使用方法</strong></p><ol><li>定义每个参数块。参数块就是简单的向量，也可以是四元数、李代数等特殊的结构。</li><li>定义残差块的计算方式。残差块对参数块进行自定义计算，返回残差值，然后求平方和作为目标函数的值。</li><li>定义雅可比的计算方式。</li><li>把所有的参数块和残差块加入Ceres定义的Problem对象中，调用Solve函数求解</li></ol><h3 id="二、Ceres安装">二、Ceres安装</h3><p>首先下载Ceres的源代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ceres-solver/ceres-solver.git</span><br></pre></td></tr></table></figure><p>安装ceres所需要的依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libsuitesparse-dev libcxsparse3 libgflags-dev libgoogle-glog-dev libgtest-dev</span><br></pre></td></tr></table></figure><p>然后进入文件夹编译安装ceres，这里耗时比较久大概20min左右。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ceres-solver/</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>安装完成后，如果在<code>/usr/local/include/ceres/</code>目录下能找到Ceres的头文件，并且也有库文件<code>/usr/local/lib/libceres.a </code>，说明安装成功了，可以使用Ceres进行优化计算了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/local/include/ceres/</span><br><span class="line">ll /usr/local/lib/libceres.a </span><br></pre></td></tr></table></figure><h3 id="三、使用Ceres拟合曲线">三、使用Ceres拟合曲线</h3><p>此示例程序依赖opencv、Eigen库，需要预先安装。</p><p><strong>main.cpp</strong>文件代码程序如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ceres/ceres.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构建代价函数的计算模型</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CURVE_FITTING_COST</span>&#123;</span><br><span class="line">    <span class="built_in">CURVE_FITTING_COST</span>(<span class="type">double</span> x, <span class="type">double</span> y) : _x(x), _y(y) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重载()，仿函数</span></span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">    <span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="type">const</span> T *<span class="type">const</span> abc, <span class="comment">// 模型参数，有3维</span></span></span></span><br><span class="line"><span class="params"><span class="function">            T *residual)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        residual[<span class="number">0</span>] = <span class="built_in">T</span>(_y) - ceres::<span class="built_in">exp</span>(abc[<span class="number">0</span>] * <span class="built_in">T</span>(_x) * <span class="built_in">T</span>(_x) + abc[<span class="number">1</span>] * <span class="built_in">T</span>(_x) + abc[<span class="number">2</span>]); <span class="comment">// y-exp(ax^2+bx+c)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> <span class="type">double</span> _x, _y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义数据参数</span></span><br><span class="line">    <span class="type">double</span> ar = <span class="number">1.0</span>, br = <span class="number">2.0</span>, cr = <span class="number">1.0</span>;    <span class="comment">//真实参数值</span></span><br><span class="line">    <span class="type">double</span> ae = <span class="number">2.0</span>, be = <span class="number">-1.0</span>, ce = <span class="number">5.0</span>;   <span class="comment">//估计参数值</span></span><br><span class="line">    <span class="type">int</span> N = <span class="number">100</span>;                            <span class="comment">//数据点个数</span></span><br><span class="line">    <span class="type">double</span> w_sigma = <span class="number">1.0</span>;                   <span class="comment">//噪声Sigma值</span></span><br><span class="line">    <span class="type">double</span> inv_sigma = <span class="number">1.0</span> / w_sigma;</span><br><span class="line">    cv::RNG rng;                            <span class="comment">//随机数产生器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成100个带高斯噪声的数据</span></span><br><span class="line">    vector&lt;<span class="type">double</span>&gt; x_data, y_data;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="type">double</span> x = i / <span class="number">100.0</span>;</span><br><span class="line">        x_data.<span class="built_in">push_back</span>(x);</span><br><span class="line">        y_data.<span class="built_in">push_back</span>(<span class="built_in">exp</span>(ar * x * x + br * x + cr) + rng.<span class="built_in">gaussian</span>(w_sigma * w_sigma));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> abc[<span class="number">3</span>] = &#123;ae, be, ce&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构建最小二乘问题</span></span><br><span class="line">    ceres::Problem problem;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="comment">//添加误差项。使用自动求导，模板参数：误差类型、输出维度、输入维度、维数要与前面struct中一致</span></span><br><span class="line">        problem.<span class="built_in">AddResidualBlock</span>(<span class="keyword">new</span> ceres::<span class="built_in">AutoDiffCostFunction</span>&lt;CURVE_FITTING_COST, <span class="number">1</span>, <span class="number">3</span>&gt;(<span class="keyword">new</span> <span class="built_in">CURVE_FITTING_COST</span>(x_data[i], y_data[i])),<span class="literal">nullptr</span>,abc);</span><br><span class="line">        <span class="comment">//nullptr为核函数不使用为空，abc为待估计参数</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置并运行求解器</span></span><br><span class="line">    ceres::Solver::Options options;     <span class="comment">//定义配置项</span></span><br><span class="line">    options.linear_solver_type = ceres::DENSE_NORMAL_CHOLESKY;  <span class="comment">//配置增量方程的解法</span></span><br><span class="line">    options.minimizer_progress_to_stdout = <span class="literal">true</span>;    <span class="comment">//输出到cout</span></span><br><span class="line">    ceres::Solver::Summary summary; <span class="comment">//定义优化信息</span></span><br><span class="line">    chrono::steady_clock::time_point t1 = chrono::steady_clock::<span class="built_in">now</span>();  <span class="comment">//计时：求解开始时间</span></span><br><span class="line">    ceres::<span class="built_in">Solve</span>(options, &amp;problem, &amp;summary);  <span class="comment">//开始优化求解！</span></span><br><span class="line">    chrono::steady_clock::time_point t2 = chrono::steady_clock::<span class="built_in">now</span>();  <span class="comment">//计时：求解结束时间</span></span><br><span class="line">    chrono::duration&lt;<span class="type">double</span>&gt; time_used = chrono::duration_cast&lt;chrono::duration&lt;<span class="type">double</span>&gt;&gt;(t2 - t1);  <span class="comment">//计算求解耗时</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出信息</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;solve time cost = &quot;</span> &lt;&lt; time_used.<span class="built_in">count</span>() &lt;&lt; <span class="string">&quot;s.&quot;</span> &lt;&lt; endl;  <span class="comment">//输出求解耗时</span></span><br><span class="line">    cout &lt;&lt; summary.<span class="built_in">BriefReport</span>() &lt;&lt; endl;  <span class="comment">//输出简要优化信息</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;estimated a, b, c = &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> a:abc)    <span class="comment">//输出优化变量</span></span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>CMakeLists.txt</strong>内容如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cmake_minimum_required</span>(VERSION <span class="number">3.20</span>)</span><br><span class="line"><span class="built_in">project</span>(ceresCurveFitting)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"># OpenCV库</span><br><span class="line"><span class="built_in">find_package</span>(OpenCV REQUIRED)</span><br><span class="line"><span class="built_in">include_directories</span>($&#123;OpenCV_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line"># Ceres库</span><br><span class="line"><span class="built_in">find_package</span>(Ceres REQUIRED)</span><br><span class="line"><span class="built_in">include_directories</span>($&#123;CERES_INCLUDE_DIRS&#125;)</span><br><span class="line"></span><br><span class="line"># Eigen库</span><br><span class="line"><span class="built_in">include_directories</span>(<span class="string">&quot;/usr/include/eigen3&quot;</span>)</span><br><span class="line"></span><br><span class="line"># 定义可执行文件</span><br><span class="line"><span class="built_in">add_executable</span>(ceresCurveFitting main.cpp)</span><br><span class="line"></span><br><span class="line"># 链接库</span><br><span class="line"><span class="built_in">target_link_libraries</span>(ceresCurveFitting $&#123;OpenCV_LIBS&#125;)</span><br><span class="line"><span class="built_in">target_link_libraries</span>(ceresCurveFitting $&#123;CERES_LIBRARIES&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://img.mahaofei.com/img/202112232017359-ceres-introduction-2.png" alt=""></p>]]></content>
    
    
    <summary type="html">Ceres是一个最小二乘问题求解库，我们只需要定义待优化的问题，然后交给它计算即可。使用方法：1. 定义每个参数块。参数块就是简单的向量，也可以是四元数、李代数等特殊的结构……</summary>
    
    
    
    <category term="机器人" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    <category term="SLAM" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/SLAM/"/>
    
    
    <category term="实验" scheme="https://www.mahaofei.com/tags/%E5%AE%9E%E9%AA%8C/"/>
    
    <category term="笔记" scheme="https://www.mahaofei.com/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="slam" scheme="https://www.mahaofei.com/tags/slam/"/>
    
  </entry>
  
  <entry>
    <title>STM32串口通信无反应</title>
    <link href="https://www.mahaofei.com/post/7b1db17f.html"/>
    <id>https://www.mahaofei.com/post/7b1db17f.html</id>
    <published>2021-10-22T08:37:44.000Z</published>
    <updated>2021-10-22T08:37:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>问题描述：</h1><p><strong>本人使用STM32F103C8T6最小系统板</strong>，当我在windows上调试好STM32程序并成功实现串口通信后。重启电脑后串口通信没有响应。</p><h1>问题原因</h1><p>最小系统板<strong>烧录时需要将Boot0置1、Boot1置0</strong>。</p><p>最小系统板<strong>运行程序时将Boot0置0、Boot1置0不变</strong></p><h1>解决过程：</h1><ol><li>烧录程序</li></ol><p>Boot0置1、Boot1置0烧录程序后，<strong>立即开启</strong>串口调试助手（不断电），此时上位机可以与单片机通信。并且可以看到<strong>USB转TTL模块亮蓝灯</strong>。</p><ol start="2"><li>问题出现</li></ol><p>若此时拔下USB转TTL模块重新插入，或重启电脑，此时可以看到<strong>USB转TTL模块蓝灯灭</strong>，此时再次使用串口调试助手，无法实现串口通信。</p><ol start="3"><li>问题解决</li></ol><p>将Boot0置0、Boot1置0后，再次插入USB转TTL模块，可以看到蓝灯亮，此时可以实现串口通信。</p><p><img src="https://img.mahaofei.com/img/20220422164159.png" alt=""></p>]]></content>
    
    
    <summary type="html">本人使用STM32F103C8T6最小系统板，当我在windows上调试好STM32程序并成功实现串口通信后。重启电脑后串口通信没有响应。</summary>
    
    
    
    <category term="嵌入式" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    <category term="单片机" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%8D%95%E7%89%87%E6%9C%BA/"/>
    
    
    <category term="bugs" scheme="https://www.mahaofei.com/tags/bugs/"/>
    
    <category term="单片机" scheme="https://www.mahaofei.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>ROS外接usb摄像头标定方法</title>
    <link href="https://www.mahaofei.com/post/130b716a.html"/>
    <id>https://www.mahaofei.com/post/130b716a.html</id>
    <published>2021-10-20T03:20:28.000Z</published>
    <updated>2021-10-20T03:20:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>usb_cam官方文档：<a href="http://wiki.ros.org/camera_calibration">http://wiki.ros.org/camera_calibration</a><br>camera_calibrate官方文档：<a href="http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration">http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration</a><br>棋盘格也在上面的链接中下载。</p><p>摄像头标定的目的是消除相机畸变，具体畸变原理可以参考之前的文章<a href="https://blog.csdn.net/weixin_44543463/article/details/120659447">【相机模型与去畸变方法详解】</a>。usb摄像头在ros系统标定过程大致可以分成几个步骤。①安装usb_camera驱动包；② 运行usb_cam读取usb摄像头图像；③下载打印棋盘格并进行摄像头标定。</p><h3 id="1-安装usb-camera驱动包">1. 安装usb_camera驱动包</h3><ul><li>进入工作空间的src目录（这里工作空间目录可能都不一样，自行修改）</li><li>下载usb_cam源代码</li><li>编译安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ros-drivers/usb_cam.git</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure><h3 id="2-运行usb-cam读取摄像头图像">2. 运行usb_cam读取摄像头图像</h3><p>首先打开一个终端，运行<code>roscore</code></p><p>然后再打开一个终端，运行<code>usb_cam-test.launch</code>启动文件（由于刚才下载的源代码中由测试文件，因此可以直接启动）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src/usb_cam/launch</span><br><span class="line">roslaunch usb_cam-test.launch</span><br></pre></td></tr></table></figure><p>默认情况下开启的是电脑自带摄像头，如果需要启动外置摄像头，则修改一下launch文件，将参数第一行的value改为<code>value=&quot;/dev/video1&quot;</code>，然后重新编译一下。</p><blockquote><p>如果更改后启动报错，那么执行<code>ls /dev/video*</code>命令看看外界摄像头是那个，再将launch文件改为对应的video2或video3。<br>比如我的usb摄像头就是 /dev/video2</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;video_device&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/dev/video1&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>如果出现如下错误<br>ERROR: cannot launch node of type [usb_cam/usb_cam_node]: usb_cam<br>ROS path [0]=/opt/ros/kinetic/share/ros<br>ROS path [1]=/opt/ros/kinetic/share<br>首先进入工作空间目录</p></blockquote><h3 id="3-进行摄像头标定">3. 进行摄像头标定</h3><p>再次打开一个终端（前两个分别运行<code>roscore</code>和<code>usb_cam-test</code>）</p><p><strong>① 查看主题名称</strong></p><p>输入<code>rostopic list</code>查看ros中的主题，检查是否有<code>/usb_cam/camera_info</code>和<code>/usb_cam/image_raw</code>两个主题。（主题名可能会不一样，有可能是/usb_cam_node记住自己的这两个主题的名字）</p><p><img src="https://img.mahaofei.com/img/202112232015769-camera-calibrate-1.png" alt=""></p><blockquote><p>如果出现 ImportError: No module named cv2的问题，请参考下面这篇文章<br>文章链接：<a href="https://blog.csdn.net/weixin_44543463/article/details/120717831#pic_center">【ImportError: No module named cv2问题的解决方法（修改python默认版本）】</a></p></blockquote><p><strong>② 执行命令启动标定程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.03 image:=/usb_cam/image_raw camera:=/usb_cam</span><br></pre></td></tr></table></figure><p>其中的8x6是指的棋盘格内部角点的个数，如下图我下载的棋盘格内部角点是8x6的。如果你是11x8角点的棋盘格，那么命令里面的8x6替换成11x8即可。</p><p><img src="https://img.mahaofei.com/img/202112232016343-camera-calibrate-2.png" alt=""></p><p><strong>③ 变换角度使程序记录样本</strong></p><p>拿着棋盘格纸多变幻几个角度，离远离近，边边角角都采集一些样本，当命令行里看到sample接近50的时候，标定按钮calibrate就会变亮了。</p><p><strong>④ 进行标定并保存</strong><br>点击CALIBRATE按钮进行标定，等待一小段时间后，就可以在命令行中看到标定的结果。<br>标定没有问题的花，点击COMMIT按钮就可以保存了，保存之后，下次再启动usb_camera就会自动使用标定的参数，可以发现摄像头不再畸变了。</p><p><img src="https://img.mahaofei.com/img/202112232016191-camera-calibrate-3.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232016631-camera-calibrate-4.png" alt=""></p>]]></content>
    
    
    <summary type="html">摄像头标定的目的是消除相机畸变，具体畸变原理可以参考之前的文章。usb摄像头在ros系统标定过程大致可以分成几个步骤。①安装usb_camera驱动包；② 运行usb_cam读取usb摄像头图像；③下载打印棋盘格并进行摄像头标定。</summary>
    
    
    
    <category term="机器人" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    <category term="ROS" scheme="https://www.mahaofei.com/categories/%E6%9C%BA%E5%99%A8%E4%BA%BA/ROS/"/>
    
    
    <category term="实验" scheme="https://www.mahaofei.com/tags/%E5%AE%9E%E9%AA%8C/"/>
    
    <category term="ROS" scheme="https://www.mahaofei.com/tags/ROS/"/>
    
  </entry>
  
  <entry>
    <title>Keil5 C51版 下载与安装教程（51单片机编程软件）</title>
    <link href="https://www.mahaofei.com/post/6c3a51dc.html"/>
    <id>https://www.mahaofei.com/post/6c3a51dc.html</id>
    <published>2021-10-16T16:00:00.000Z</published>
    <updated>2021-10-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>阿里云盘<br>链接：<a href="https://www.aliyundrive.com/s/ttZBZXBNMja">https://www.aliyundrive.com/s/ttZBZXBNMja</a><br>下载完成后将文件后缀名改回【.7z】即可正常解压。</p></blockquote><ol><li>解压安装包，右键【C51-V957.exe】，<strong>以管理员身份运行</strong></li></ol><p><img src="https://img.mahaofei.com/img/202112232002909-keil51-1.png" alt=""></p><ol start="2"><li>莫得选择，<strong>点击next</strong>继续安装</li></ol><p><img src="https://img.mahaofei.com/img/202112232002704-keil51-2.png" alt=""></p><ol start="3"><li><strong>同意</strong>用户协议，<strong>点击next</strong>继续</li></ol><p><img src="https://img.mahaofei.com/img/202112232003825-keil51-3.png" alt=""></p><ol start="4"><li>选择安装路径，<strong>路径不能有中文</strong>，进行安装（注：如果想要安装51和MDK两个版本的Keil，也就是想要编写51单片机和32单片机两种程序，需要安装在两个单独的文件夹中）</li></ol><p><img src="https://img.mahaofei.com/img/202112232003419-keil51-4.png" alt=""></p><ol start="5"><li><strong>信息随便输</strong>，输完直接<strong>点击next</strong>就可以</li></ol><p><img src="https://img.mahaofei.com/img/202112232003599-keil51-5.png" alt=""></p><ol start="6"><li>安装过程很快，大约十几秒，点击finish完成安装</li></ol><p><img src="https://img.mahaofei.com/img/202112232004114-keil51-6.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232004458-keil51-7.png" alt=""></p><ol start="7"><li>回到桌面，找到【Keil5】的快捷方式，右键<strong>以管理员身份运行</strong>，然后打开【File -&gt; License Management】选项卡</li></ol><p><img src="https://img.mahaofei.com/img/202112232004254-keil51-8.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232004032-keil51-9.png" alt=""></p><ol start="8"><li>在解压的安装包中找到【Crack.exe】文件，<strong>右键以管理员身份运行</strong></li></ol><p><img src="https://img.mahaofei.com/img/202112232005088-keil51-10.png" alt=""></p><ol start="9"><li>在【License Management】中<strong>复制CID</strong>，<strong>粘贴到破解程序</strong>中，target选择C51，<strong>点击Generate</strong>生成激活码</li></ol><p><img src="https://img.mahaofei.com/img/202112232005496-keil51-11.png" alt=""></p><p><img src="https://img.mahaofei.com/img/202112232005539-keil51-12.png" alt=""></p><ol start="10"><li><p>将激活码粘贴回【License Management】下方的输入框中，并点击【Add LIC】</p><p><img src="https://img.mahaofei.com/img/202112232006203-keil51-13.png" alt=""></p></li><li><p>可以看到已经成功激活，激活时间到2032年</p><p><img src="https://img.mahaofei.com/img/202112232006493-keil51-14.png" alt=""></p></li></ol>]]></content>
    
    
    <summary type="html">本教程介绍Keil5 51版的下载安装方法，Keil5是一款非常友好和强大的C语言软件开发系统。Keil5提供了清晰直观的操作界面,而且使用起来十分的轻松便捷,并具备编译器、编译器、安装包和调试跟踪功能。</summary>
    
    
    
    <category term="嵌入式" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    <category term="单片机" scheme="https://www.mahaofei.com/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%8D%95%E7%89%87%E6%9C%BA/"/>
    
    
    <category term="软件安装" scheme="https://www.mahaofei.com/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
    <category term="单片机" scheme="https://www.mahaofei.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"/>
    
  </entry>
  
</feed>
